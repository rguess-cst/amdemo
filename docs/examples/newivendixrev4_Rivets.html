<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>iVendix - Aston Martin Prototype</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="../assets/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
	</style>
    <link href="../assets/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">

	<link href="../assets/css/tablesorter.css" rel="stylesheet">
  </head>

<!--- script includes are at bottom --->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/js/jquery.js"></script>
    <script src="../assets/js/bootstrap-transition.js"></script>
    <script src="../assets/js/bootstrap-alert.js"></script>
    <script src="../assets/js/bootstrap-modal.js"></script>
    <script src="../assets/js/bootstrap-dropdown.js"></script>
    <script src="../assets/js/bootstrap-scrollspy.js"></script>
    <script src="../assets/js/bootstrap-tab.js"></script>
    <script src="../assets/js/bootstrap-tooltip.js"></script>
    <script src="../assets/js/bootstrap-popover.js"></script>
    <script src="../assets/js/bootstrap-button.js"></script>
    <script src="../assets/js/bootstrap-collapse.js"></script>
    <script src="../assets/js/bootstrap-carousel.js"></script>
    <script src="../assets/js/bootstrap-typeahead.js"></script>
	<script src="../../js/jquery-ui-1.8.13.custom.min.js"></script>
	<link href="../../js/jquery_ui_themes.1.8.13/ui-lightness/jquery-ui-1.8.13.custom.css">
	<script src="../assets/js/jquery.tablesorter.min-2.03.js"></script>
    <script src="../assets/js/bootstrap-datepicker.js"></script>
	<link href="../assets/css/bootstrap-datepicker.css" rel="stylesheet">
	<script src="../assets/js/date.format.js"></script>
	<script src="../../js/divController.js"></script>
	<script src="../assets/js/json2.js"></script>
	<script src="../assets/js/underscore.js"></script>
	<script src="../assets/js/backbone.js"></script>
	<script src="../assets/js/backbone-relational.js"></script>
	<script src="../assets/js/rivets.js"></script>

  <script language="javascript">

	var divC=new $.divController();
	
	$(document).ready(function()
	{
		$("#orderreview").draggable();
		$("#orderimage1").draggable();
		$("#orderimage2").draggable();
		
		$(".btnOrderView").on("click",function() {
			$(".btnOrderView").removeClass("btn-info");
			$(this).addClass("btn-info");
		});
	});

// Backbone.js Testing
var imageView = null;
var searchView = null;
var buildCarouselView;
var orderGroup;
var searchProducts;
$(document).ready(function() {
	Backbone.sync = function(method, model, options) {
		//alert(method + (model.hasChanged() ? ' (changed)' : ' (unchanged)') + '\n\n' + JSON.stringify(model) + '\n' + JSON.stringify(options));
	}
	
	MenuItem = Backbone.RelationalModel.extend({
		//Fields: MenuItem_ID, MenuGroup, MenuType_cd, MenuText, MenuIcon, Separator
		idAttribute: "MenuItem_ID"
	});
	
	MenuItems = Backbone.Collection.extend({
		model: MenuItem
	});

	MenuView = Backbone.View.extend({
		initialize: function() {
		},
		
		render: function() {
			$(this.el).html(_.template($("#template-Menu").html(),{menuItems: this.model}));
			
			return this;
		},
		
		events: {
		},
	});

	var menuItems = new MenuItems([{MenuItem_ID: 1, MenuGroup: "AA", MenuType_cd: "mm", MenuAction: "", MenuText: "Home", MenuIcon: "icon-home icon-white", Separator: false},{MenuItem_ID: 2, MenuGroup: "BB", MenuType_cd: "mm", MenuAction: "", MenuText: "Orders", MenuIcon: "", Separator: false},{MenuItem_ID: 21, MenuGroup: "BB", MenuType_cd: "sm1", MenuAction: "showRetailerAndStore()", MenuText: "Create a New Order", MenuIcon: "", Separator: false},{MenuItem_ID: 22, MenuGroup: "BB", MenuType_cd: "sm1", MenuAction: "showSSOF()", MenuText: "iVendix Order Forms", MenuIcon: "", Separator: false},{MenuItem_ID: 23, MenuGroup: "BB", MenuType_cd: "sm1", MenuAction: "orderFromTemplate()", MenuText: "iVendix Templates", MenuIcon: "", Separator: false},{MenuItem_ID: 24, MenuGroup: "BB", MenuType_cd: "sm1", MenuAction: "", MenuText: "", MenuIcon: "", Separator: true},{MenuItem_ID: 25, MenuGroup: "BB", MenuType_cd: "sm1", MenuAction: "", MenuText: "Order Dashboard", MenuIcon: "", Separator: false},{MenuItem_ID: 26, MenuGroup: "BB", MenuType_cd: "sm1", MenuAction: "", MenuText: "Order Search", MenuIcon: "icon-search", Separator: false},{MenuItem_ID: 27, MenuGroup: "BB", MenuType_cd: "sm1", MenuAction: "", MenuText: "", MenuIcon: "", Separator: true},{MenuItem_ID: 28, MenuGroup: "BB", MenuType_cd: "sm1", MenuAction: "", MenuText: "Work In Progress", MenuIcon: "", Separator: false},{MenuItem_ID: 3, MenuGroup: "CC", MenuType_cd: "mm", MenuAction: "", MenuText: "Check Inventory", MenuIcon: "", Separator: false},{MenuItem_ID: 4, MenuGroup: "DD", MenuType_cd: "mm", MenuAction: "", MenuText: "Admin", MenuIcon: "icon-cog icon-white", Separator: false},{MenuItem_ID: 41, MenuGroup: "DD", MenuType_cd: "sm1", MenuAction: "", MenuText: "My Profile", MenuIcon: "icon-user", Separator: false},{MenuItem_ID: 42, MenuGroup: "DD", MenuType_cd: "sm1", MenuAction: "", MenuText: "User Profiles", MenuIcon: "", Separator: false},{MenuItem_ID: 43, MenuGroup: "DD", MenuType_cd: "sm1", MenuAction: "", MenuText: "Company Profiles", MenuIcon: "", Separator: false},{MenuItem_ID: 44, MenuGroup: "DD", MenuType_cd: "sm1", MenuAction: "", MenuText: "Language", MenuIcon: "", Separator: false},{MenuItem_ID: 5, MenuGroup: "EE", MenuType_cd: "mm", MenuAction: "", MenuText: "Messages", MenuIcon: "", Separator: false},{MenuItem_ID: 51, MenuGroup: "EE", MenuType_cd: "sm1", MenuAction: "", MenuText: "Shared Files", MenuIcon: "icon-file", Separator: false},{MenuItem_ID: 52, MenuGroup: "EE", MenuType_cd: "sm1", MenuAction: "", MenuText: "Posts", MenuIcon: "", Separator: false},{MenuItem_ID: 6, MenuGroup: "FF", MenuType_cd: "mm", MenuAction: "", MenuText: "Help", MenuIcon: "icon-question-sign icon-white", Separator: false},{MenuItem_ID: 61, MenuGroup: "FF", MenuType_cd: "sm1", MenuAction: "", MenuText: "Contact CenterStone", MenuIcon: "", Separator: false},{MenuItem_ID: 62, MenuGroup: "FF", MenuType_cd: "sm1", MenuAction: "", MenuText: "Contact Under Armour", MenuIcon: "", Separator: false},{MenuItem_ID: 63, MenuGroup: "FF", MenuType_cd: "sm1", MenuAction: "", MenuText: "FAQs", MenuIcon: "", Separator: false},{MenuItem_ID: 7, MenuGroup: "GG", MenuType_cd: "mm", MenuAction: "", MenuText: "Exit", MenuIcon: "icon-eject icon-white", Separator: false}]);
	
	var newMenu = new MenuView({el: $("#menu_DIV"), model: menuItems});
	newMenu.render();

	
	Color = Backbone.RelationalModel.extend({
		//defaults: function() { return {Color_ID: 0, Color: '', ColorCode: ''};},
		idAttribute: "Color_ID"
	});
	
	Colors = Backbone.Collection.extend({
		model: Color
	});

	VSize = Backbone.RelationalModel.extend({
		//defaults: function() { return {VSize_ID: 0, VSize: ''};},
		idAttribute: "VSize_ID"
	});
	
	VSizes = Backbone.Collection.extend({
		model: VSize
	});

	Size = Backbone.RelationalModel.extend({
		//defaults: function() { return {Size_ID: 0, Size: ''};},
		idAttribute: "Size_ID"
	});
	
	Sizes = Backbone.Collection.extend({
		model: Size
	});
	
	Stock = Backbone.RelationalModel.extend({
		//defaults: function() { return {ProductsDetail_ID: 0, InventoryAvailableDate: '', Quantity: 0};},
		idAttribute: "ProductsDetail_ID"
	});
	
	ProductsDetail = Backbone.RelationalModel.extend({
		//defaults: function() { return {ProductsDetail_ID: 0, Price: 0, SalePrice: 0, IsPercent: false, DiscountValue: 0};},
		idAttribute: "ProductsDetail_ID",
		relations: [
			{
				type: Backbone.HasOne,
				key: 'Product',
				keySource: 'Product_ID',
				relatedModel: 'Product',
			},
			{
				type: Backbone.HasOne,
				key: 'Color',
				keySource: 'Color_ID',
				relatedModel: 'Color',
			},
			{
				type: Backbone.HasOne,
				key: 'VSize',
				keySource: 'VSize_ID',
				relatedModel: 'VSize',
			},
			{
				type: Backbone.HasOne,
				key: 'Size',
				keySource: 'Size_ID',
				relatedModel: 'Size',
			},
			{
				type: Backbone.HasMany,
				key: 'Stock_c',
				relatedModel: 'Stock',
			}			
		]
	});

	ProductsDetails = Backbone.Collection.extend({
		model: ProductsDetail
	});
	
	Product = Backbone.RelationalModel.extend({
		//defaults: function() { return {Product_ID: 0, ItemNumber: '', ProductName: '', Sizes: [], Colors: [], Details: [], Price: '$0.00'};},
		idAttribute: "Product_ID",
		relations: [
			{
				type: Backbone.HasMany,
				key: 'Colors',
				relatedModel: 'Color',
			},
			{
				type: Backbone.HasMany,
				key: 'VSizes',
				relatedModel: 'VSize',
			},
			{
				type: Backbone.HasMany,
				key: 'Sizes',
				relatedModel: 'Size',
			},
			{
				type: Backbone.HasMany,
				key: 'ProductsDetails',
				relatedModel: 'ProductsDetail',
			}			
		]
	});
	
	Products = Backbone.Collection.extend({
		model: Product
	});

	OrderDetail = Backbone.RelationalModel.extend({
		//defaults: function() { return {OrderDetails_ID, ProductsDetail: 0, Qty: 0}; },
		idAttribute: "OrderDetails_ID",
		relations: [
			{
				type: Backbone.HasOne,
				key: 'ProductsDetail',
				keySource: 'ProductsDetail_ID',
				relatedModel: 'ProductsDetail',
			}
		]
	});
	
	OrderDetails = Backbone.Collection.extend({
		model: OrderDetail
	});
	
	OrderProduct = Backbone.RelationalModel.extend({
		defaults: function() { return {product: '', orderDetails: new OrderDetails()}; }
	});
	
	
	OrderProducts = Backbone.Collection.extend({
		model: OrderProduct
	});
	
	
	OrderHeader = Backbone.RelationalModel.extend({
		//defaults: function() { return {OrderHeader_ID: 0, RequestedShipDate: '', OrderName: '', RetailersPO: '', OrderDetails: ''}; },
		idAttribute: "OrderHeader_ID",
		relations: [
			{
				type: Backbone.HasMany,
				key: 'OrderDetails',
				relatedModel: 'OrderDetail',
				collectionType: 'OrderDetails'
			}
		]
		
	});
	
	OrderHeaders = Backbone.Collection.extend({
		model: OrderHeader
	});
	
	OrderGroupProduct = Backbone.RelationalModel.extend({
		//defaults: function() { return {OrderGroup_ID: 0, Product_ID: 0}}
	});

	OrderGroupProducts = Backbone.Collection.extend({
		model: Product
	});
	
	OrderGroup = Backbone.RelationalModel.extend({
		//defaults: function() { return {OrderGroup_ID: 0, OrderGroupProducts: '', OrderHeaders: ''}; },
		initialize: function() {
			this.get("OrderGroupProducts").bind("remove", this.handleRemoveProduct, this);
		},
		relations: [
			{
				type: Backbone.HasMany,
				key: 'OrderHeaders',
				relatedModel: 'OrderHeader',
				collectionType: 'OrderHeaders'
			},
			{
				type: Backbone.HasMany,
				key: 'OrderGroupProducts',
				relatedModel: 'Product',
				collectionType: 'Products'
			}
		],
		idAttribute: "OrderGroup_ID",
		url: function() { return "http://app.ivendix.local/test"; },
		handleRemoveProduct: function(prod) {
			this.get("OrderHeaders").each(function (ord) {
				var ods = ord.get("OrderDetails");
				for(var i = ods.length-1; i >= 0; i--) {
					var od = ods.at(i);
					if(od.get("ProductsDetail").get("Product") == prod) {
						od.destroy();
					}
				}
			});
		}
	});
	
	GridView = Backbone.View.extend({
		initialize: function() {
			var theView = this;
			theView.model.get("OrderHeaders").each(function(ord,iOrd) {
				if((theView.options.shipment == 0) || (theView.options.shipment == (iOrd+1))) {
					ord.bind("change", theView.refresh, theView);
					ord.get("OrderDetails").bind("change", theView.refresh, theView);
					ord.get("OrderDetails").bind("add", theView.refresh, theView);
					ord.get("OrderDetails").bind("remove", theView.refresh, theView);
				}
			});
		},
		
		render: function() {
			var theView = this;
			var ord = theView.model.get("OrderHeaders").at((theView.options.shipment == 0) ? 0 : theView.options.shipment - 1);
			$(this.el).html(_.template($("#template-GridView").html(),{shipment: theView.options.shipment, product: theView.options.product, header: ord, options: theView.options}));

			this.refresh();
			
			return this;
		},
		
		refresh: function() {
			var theView = this;
			var rTotals = new Object, cTotals = new Object, gTotal = 0, gTotalPrice = 0;
			$(theView.el).find("input[pdid]").val("");
			$(theView.el).find(".rowTotal,.colTotall").html("0");
			theView.model.get("OrderHeaders").each(function(ord, iOrd) {
				if((theView.options.shipment == 0) || (theView.options.shipment == (iOrd+1))) {
					ord.get("OrderDetails").each(function(od) {
						if(od.get("ProductsDetail").get("Product") == theView.options.product) {
							var qty = parseInt(od.get("Qty"));
							if(qty) {
								var elQty = $(theView.el).find("input[pdid='" + od.get("ProductsDetail").get("ProductsDetail_ID") + "']");
								elQty.val((!isNaN(parseInt(elQty.val())) ? parseInt(elQty.val()) : 0) + qty);
							}
							var Color_ID = od.get("ProductsDetail").get("Color").get("Color_ID");
							rTotals[Color_ID] = (rTotals[Color_ID] ? rTotals[Color_ID] : 0) + qty;
							var Size_ID = od.get("ProductsDetail").get("Size").get("Size_ID");
							cTotals[Size_ID] = (cTotals[Size_ID] ? cTotals[Size_ID] : 0) + qty;
							gTotal += qty;
							gTotalPrice += (qty * od.get("ProductsDetail").get("Product").get("Price"));
						}
					});
				}
			});
			for(var key in rTotals) {
				$(theView.el).find('.rowTotal[color="' + key + '"]').html(rTotals[key]);
			}
			for(var key in cTotals) {
				$(theView.el).find('.colTotal[size="' + key + '"]').html(cTotals[key]);
			}
			$(theView.el).find(".gridTotal").html(gTotal);
			$(theView.el).find(".gridTotalPrice").html(formatMoney(gTotalPrice,0));
			
			return this;
		},
		
		events: {
			"change input[pdid]": "changeQty",
			"click .copySizeRun": "copySizeRun",
			"click .pasteSizeRun": "pasteSizeRun"
			},
		
		changeQty: function(e) {
			var ord = this.model.get("OrderHeaders").at(this.options.shipment - 1);
			var pdid = $(e.target).attr("pdid");
			var odid = ord.get("OrderHeader_ID") + "_" + pdid;
			var qty = !isNaN(parseInt($(e.target).val())) ? $(e.target).val() : "0";
			var od = ord.get("OrderDetails").get(odid);
			if(od) {
				od.set("Qty",qty);
			} else {
				od = new OrderDetail({OrderDetails_ID:odid,ProductsDetail_ID:pdid,Qty:qty});
				ord.get("OrderDetails").add(od);
			}
		},

		copySizeRun: function(e) {
			// should this be done in the model?
			var tgt = $(e.target).closest(".copySizeRun");
			var sizeScale = tgt.closest("table").attr("sizeScale");
			var sizeRun = "";
			$(e.target).closest("tr").find("input").each(function(i,e) {
				sizeRun += (i == 0 ? "" : ",") + (!isNaN($(e).val()) ? $(e).val() : "");
			});
			$.sizeRuns[sizeScale] = sizeRun;
			$("table[sizeScale=" + sizeScale + "] .pasteSizeRun").removeClass("disabled");
			$("table[sizeScale=" + sizeScale + "] i.pasteSizeRun").css("opacity","1").css("filter","alpha(opacity=100)");
			$(".copySizeRun").removeClass("btn-success");
			$(".pasteSizeRun").removeClass("btn-success btn-warning disabled");
			tgt.addClass("btn-success");
		},

		pasteSizeRun: function(e) {
			// should this be done in the model?
			var tgt = $(e.target).closest(".pasteSizeRun");
			if(!tgt.hasClass("disabled")) {
				var sizeScale = tgt.closest("table").attr("sizeScale");
				var sizeRun = $.sizeRuns[sizeScale];
				var hasErrors = false;
				if(sizeRun) {
					var aSizeRun = sizeRun.split(",");
					tgt.closest("tr").find("td").removeClass("warning");
					tgt.attr("title","");
					tgt.closest("tr").find("input").each(function(i,e) {
						// don't allow pasting beyond 12 units to simulate inventory constraints
						if(aSizeRun[i] > 12) {
							$(e).val(12);
							$(e).closest("td").addClass("control-group").addClass("warning");
							$(e).attr("title","Only 12 of " + aSizeRun[i] + " units could be pasted for this item.");
							hasErrors = true;
						} else {
							$(e).val(aSizeRun[i]);
						}
						$(e).trigger("change");
					});
				}
				tgt.addClass(hasErrors ? "btn-warning" : "btn-success");
				tgt.closest("tr").find(".qtyCell").first().trigger("change");
			}
		}
	});
	
	ListView = Backbone.View.extend({
		initialize: function() {
			var theView = this;
			theView.model.get("OrderGroupProducts").bind("add", theView.render, theView);
			theView.model.get("OrderGroupProducts").bind("remove", theView.render, theView);
			theView.model.get("OrderHeaders").each(function(ord) {
				ord.bind("change", theView.refreshDates, theView);
				ord.get("OrderDetails").bind("change", theView.refresh, theView);
				ord.get("OrderDetails").bind("add", theView.refresh, theView);
				ord.get("OrderDetails").bind("remove", theView.refresh, theView);
			});
		},
		
		render: function() {
			$(this.el).html(_.template($("#template-ListView").html(),{orderGroup: this.model, products: this.model.get("OrderGroupProducts")}));
			this.refreshDates();
			this.refresh();
		},
		
		refresh: function() {
			var theView = this;
			$(theView.el).find("input[pdid]").val("");
			var gTotalPrice = 0;
			var lTotals = new Object();
			theView.model.get("OrderHeaders").each(function(ord, iOrd) {
				var cTotal = 0;
				var cTotalPrice = 0;
				ord.get("OrderDetails").each(function(od) {
					var pdid = od.get("ProductsDetail").get("ProductsDetail_ID");
					var qty = parseInt(od.get("Qty"));
					var price = od.get("ProductsDetail").get("Product").get("Price");
					$(theView.el).find('input[pdid="' + pdid + '"][shipment="' + (iOrd + 1) + '"]').val(qty);
					lTotals[pdid] = (lTotals[pdid] ? lTotals[pdid] : 0) + (qty * price);
					cTotal += qty;
					cTotalPrice += (qty * price);
				});
				$(theView.el).find('.colQtyTotal[shipment="' + (iOrd + 1) + '"]').html(cTotal);
				$(theView.el).find('.colTotal[shipment="' + (iOrd + 1) + '"]').html(formatMoney(cTotalPrice));
				gTotalPrice += cTotalPrice;
			});
			for(var key in lTotals) {
				$(theView.el).find('.lineTotal[pdid="' + key + '"]').html(formatMoney(lTotals[key]));
			}
			$(theView.el).find(".orderTotal").html(formatMoney(gTotalPrice));
			
			return this;
		},
		
		refreshDates: function() {
			var theView = this;
			theView.model.get("OrderHeaders").each(function(ord, i) {
				var theShipDate = new Date(ord.get("RequestedShipDate"));
				var objDate = $(theView.el).find('a[shipment="' + (i + 1) + '"]');
				objDate.find("i.dpicon").attr("data-date",dateFormat(theShipDate,"yyyy-mm-dd"));
				objDate.find("span.dptarget").html(dateFormat(theShipDate,"mmm d, yyyy"));
			});
			
			return this;
		},
		
		events: {
			"change input[pdid]": "changeQty"
		},
		
		changeQty: function(e) {
			var pdid  = $(e.target).attr("pdid");
			var shipment = parseInt($(e.target).attr("shipment"));
			var qty = $(e.target).val();
			var ord = this.model.get("OrderHeaders").at(shipment-1);
			if(ord) {
				var odid = ord.get("OrderHeader_ID") + "_" + pdid;
				var od = ord.get("OrderDetails").get(odid);
				if(od) {
					od.set("Qty",qty);
				} else {
					od = new OrderDetail({OrderDetails_ID:odid,ProductsDetail_ID:pdid,Qty:qty});
					ord.get("OrderDetails").add(od);
				}
			}
		}
	});
	
	
	ImageView = Backbone.View.extend({
		initialize: function() {
			var theView = this;
			theView.model.bind("change", theView.render, theView);
			orderGroup.get("OrderGroupProducts").bind("add", theView.render, theView);
			orderGroup.get("OrderGroupProducts").bind("remove", theView.render, theView);
			orderGroup.get("OrderHeaders").each(function(ord) {
				ord.get("OrderDetails").bind("change", theView.render, theView);
				ord.get("OrderDetails").bind("add", theView.render, theView);
				ord.get("OrderDetails").bind("remove", theView.render, theView);
			});
		},
		
		render: function() {
			var theView = this;
			if(theView.options.viewType == "search") {
				$(this.el).html(_.template($("#template-ImageView").html(),{shipment: null, details: null, products: theView.model}));
			} else if(theView.options.viewType == "order") {
				$(this.el).html(_.template($("#template-ImageView").html(),{shipment: theView.options.shipment, products: theView.model, details: orderGroup.get("OrderHeaders").at(theView.options.shipment-1).get("OrderDetails")}));
			};
		},

		events: {
			"click i.icon-plus": "handleAddProduct",
			"click i.icon-minus": "handleClearProduct",
			"click i.icon-remove": "handleRemoveProduct",
			"click .editGrid": "handleEditGrid"
		},
		handleAddProduct: function(e) {
			var pid = parseInt($(e.target).closest("li").attr("cid"));
			orderGroup.get("OrderGroupProducts").add({Product_ID: pid});
		},
		handleClearProduct: function(e) {
			var pid = parseInt($(e.target).closest("li").attr("cid"));
			var prod = orderGroup.get("OrderGroupProducts").get(pid);
			var ods = orderGroup.get("OrderHeaders").at(this.options.shipment-1).get("OrderDetails");
			for(var i = ods.length-1; i >= 0; i--) {
				var od = ods.at(i);
				if(od.get("ProductsDetail").get("Product") == prod) {
					od.destroy();
				}
			}
		},
		handleRemoveProduct: function(e) {
			var pid = parseInt($(e.target).closest("li").attr("cid"));
			orderGroup.get("OrderGroupProducts").remove(orderGroup.get("OrderGroupProducts").get(pid));
		},		
		handleEditGrid: function(e) {
			var theView = this;
			var pid = parseInt($(e.target).closest("li").attr("cid"));
			var prod = orderGroup.get("OrderGroupProducts").get(pid);
			var newGrid = new GridView({el: $("#ivgrid_DIV"), model: orderGroup, shipment: theView.options.shipment, product: prod, showShipmentHeader: false, showSizeRuns: false, showShipmentTotal: true, showButtons: true});
			newGrid.render();
			$("#ordergridonly").show();
		}
	});
	
	CarouselView = Backbone.View.extend({
		initialize: function() {
				this.model.bind("add", this.render, this);
			this.model.bind("remove", this.render, this);
		},
		
		render: function() {
			$(this.el).html(_.template($("#template-Carousel").html(),{products: this.model}));
		}
	});
	
	ShipmentTabsView = Backbone.View.extend({
		initialize: function() {
			var theView = this;
			theView.model.get("OrderHeaders").each(function(ord) {
				ord.get("OrderDetails").bind("change", theView.render, theView);
				ord.get("OrderDetails").bind("add", theView.render, theView);
			});
			theView.model.get("OrderHeaders").bind("change", theView.render, theView);
			theView.model.get("OrderHeaders").bind("add", theView.render, theView);
		},
		
		render: function() {
			$(this.el).html(_.template($("#template-ShipmentTabs").html(),{orderGroup: this.model}));
			
			$(this.el).find(".dpicon").datepicker().on("changeDate", function(e) {
				$(this).datepicker("hide");
				$(this).siblings(".dptarget").trigger("datechanged", e.date);
			});
			
			return this;
		},
		
		events: {
			"click li[shipment]": "handleChangeShipment",
			"click .addShipment": "handleAddShipment",
			"datechanged": "handleDateChange"
		},
		
		handleChangeShipment: function(e) {
			var iShipment = $(e.target).closest("li").attr("shipment");
			showshipment(iShipment);
		},
		
		handleAddShipment: function(e) {
			addShipment();
		},
		
		handleDateChange: function(e,dtNewDate) {
			var iShipment = $(e.target).closest("li").attr("shipment");
			this.model.get("OrderHeaders").at(iShipment-1).set("RequestedShipDate",dateFormat(dtNewDate,"yyyy-mm-dd"));
		}
	});

	// Note: "Product_ID" will have to be Product_ID_Navigation_ID_BusinessUnit_ID_PriceSchedule_ID
	new Products([{Product_ID: 1, ItemNumber: 'ABC123', ProductName: 'Jacket', Price: 250.00, Image:"10004_L.jpg", Sizes:[{Size_ID: 1, Size: "XS"}, {Size_ID: 2, Size: "S"}, {Size_ID: 3, Size: "M"}, {Size_ID: 4, Size: "L"}, {Size_ID: 5, Size: "XL"}], Colors:[{Color_ID: 1, Color: "Blue", ColorCode: "BLU"},{Color_ID: 2, Color: "Grey", ColorCode: "GRY"},{Color_ID: 3, Color: "Red", ColorCode: "RED"},{Color_ID: 4, Color: "Yellow", ColorCode: "YEL"},{Color_ID: 5, Color: "Green", ColorCode: "GRN"}], ProductsDetails: [{ProductsDetail_ID: 2, Product_ID: 1, Color_ID: 1, VSize_ID: 0, Size_ID: 2},{ProductsDetail_ID: 3, Product_ID: 1, Color_ID: 1, VSize_ID: 0, Size_ID: 3},{ProductsDetail_ID: 4, Product_ID: 1, Color_ID: 1, VSize_ID: 0, Size_ID: 4},{ProductsDetail_ID: 11, Product_ID: 1, Color_ID: 2, VSize_ID: 0, Size_ID: 1},{ProductsDetail_ID: 12, Product_ID: 1, Color_ID: 2, VSize_ID: 0, Size_ID: 2},{ProductsDetail_ID: 13, Product_ID: 1, Color_ID: 2, VSize_ID: 0, Size_ID: 3},{ProductsDetail_ID: 14, Product_ID: 1, Color_ID: 2, VSize_ID: 0, Size_ID: 4},{ProductsDetail_ID: 15, Product_ID: 1, Color_ID: 2, VSize_ID: 0, Size_ID: 5},{ProductsDetail_ID: 21, Product_ID: 1, Color_ID: 3, VSize_ID: 0, Size_ID: 1},{ProductsDetail_ID: 22, Product_ID: 1, Color_ID: 3, VSize_ID: 0, Size_ID: 2},{ProductsDetail_ID: 23, Product_ID: 1, Color_ID: 3, VSize_ID: 0, Size_ID: 3},{ProductsDetail_ID: 24, Product_ID: 1, Color_ID: 3, VSize_ID: 0, Size_ID: 4},{ProductsDetail_ID: 25, Product_ID: 1, Color_ID: 3, VSize_ID: 0, Size_ID: 5},{ProductsDetail_ID: 31, Product_ID: 1, Color_ID: 4, VSize_ID: 0, Size_ID: 1},{ProductsDetail_ID: 32, Product_ID: 1, Color_ID: 4, VSize_ID: 0, Size_ID: 2},{ProductsDetail_ID: 33, Product_ID: 1, Color_ID: 4, VSize_ID: 0, Size_ID: 3},{ProductsDetail_ID: 34, Product_ID: 1, Color_ID: 4, VSize_ID: 0, Size_ID: 4},{ProductsDetail_ID: 35, Product_ID: 1, Color_ID: 4, VSize_ID: 0, Size_ID: 5},{ProductsDetail_ID: 41, Product_ID: 1, Color_ID: 5, VSize_ID: 0, Size_ID: 1},{ProductsDetail_ID: 42, Product_ID: 1, Color_ID: 5, VSize_ID: 0, Size_ID: 2},{ProductsDetail_ID: 43, Product_ID: 1, Color_ID: 5, VSize_ID: 0, Size_ID: 3},{ProductsDetail_ID: 44, Product_ID: 1, Color_ID: 5, VSize_ID: 0, Size_ID: 4},{ProductsDetail_ID: 45, Product_ID: 1, Color_ID: 5, VSize_ID: 0, Size_ID: 5}]},{Product_ID: 2, ItemNumber: 'PANT01', ProductName: 'Pant', Price:49.95, Image:"10008_5112.jpg", Sizes:[{Size_ID: 6, Size: "30"}, {Size_ID: 7, Size: "32"}, {Size_ID: 8, Size: "34"}, {Size_ID: 9, Size: "36"}, {Size_ID: 10, Size: "38"}, {Size_ID: 11, Size: "40"}], Colors:[{Color_ID: 1, Color: "Blue", ColorCode: "BLU"},{Color_ID: 2, Color: "Grey", ColorCode: "GRY"},{Color_ID: 6, Color: "Black", ColorCode: "BLK"}], ProductsDetails: [{ProductsDetail_ID: 130, Product_ID: 2, Color_ID: 1, VSize_ID: 0, Size_ID: 6},{ProductsDetail_ID: 132, Product_ID: 2, Color_ID: 1, VSize_ID: 0, Size_ID: 7},{ProductsDetail_ID: 134, Product_ID: 2, Color_ID: 1, VSize_ID: 0, Size_ID: 8},{ProductsDetail_ID: 136, Product_ID: 2, Color_ID: 1, VSize_ID: 0, Size_ID: 9},{ProductsDetail_ID: 138, Product_ID: 2, Color_ID: 1, VSize_ID: 0, Size_ID: 10},{ProductsDetail_ID: 140, Product_ID: 2, Color_ID: 1, VSize_ID: 0, Size_ID: 11},{ProductsDetail_ID: 230, Product_ID: 2, Color_ID: 2, VSize_ID: 0, Size_ID: 6},{ProductsDetail_ID: 232, Product_ID: 2, Color_ID: 2, VSize_ID: 0, Size_ID: 7},{ProductsDetail_ID: 234, Product_ID: 2, Color_ID: 2, VSize_ID: 0, Size_ID: 8},{ProductsDetail_ID: 236, Product_ID: 2, Color_ID: 2, VSize_ID: 0, Size_ID: 9},{ProductsDetail_ID: 238, Product_ID: 2, Color_ID: 2, VSize_ID: 0, Size_ID: 10},{ProductsDetail_ID: 240, Product_ID: 2, Color_ID: 2, VSize_ID: 0, Size_ID: 11},{ProductsDetail_ID: 330, Product_ID: 2, Color_ID: 6, VSize_ID: 0, Size_ID: 6},{ProductsDetail_ID: 332, Product_ID: 2, Color_ID: 6, VSize_ID: 0, Size_ID: 7},{ProductsDetail_ID: 334, Product_ID: 2, Color_ID: 6, VSize_ID: 0, Size_ID: 8},{ProductsDetail_ID: 336, Product_ID: 2, Color_ID: 6, VSize_ID: 0, Size_ID: 9},{ProductsDetail_ID: 338, Product_ID: 2, Color_ID: 6, VSize_ID: 0, Size_ID: 10},{ProductsDetail_ID: 340, Product_ID: 2, Color_ID: 6, VSize_ID: 0, Size_ID: 11}]}]);
	
	orderGroup = new OrderGroup({
		OrderGroup_ID: 100,
		OrderHeaders:[{OrderHeader_ID: 101, RequestedShipDate: '2012-07-01', OrderName: '', RetailersPO: '',
		OrderDetails: [{OrderDetails_ID: "101_2", ProductsDetail_ID: 2, Qty: 2},{OrderDetails_ID: "101_3", ProductsDetail_ID: 3, Qty: 3},{OrderDetails_ID: "101_4", ProductsDetail_ID: 4, Qty: 4}]},{OrderHeader_ID: 102, RequestedShipDate: '2012-09-01', OrderName: '', RetailersPO: '',
		OrderDetails: [{OrderDetails_ID: "102_2", ProductsDetail_ID: 2, Qty: 7}]}],
		OrderGroupProducts: [1]
	});
	
	//orderGroup.get("OrderGroupProducts").add({Product_ID: 2});
	
	$("#btnSave").on("click",function() {
		orderGroup.save();
	});

	searchProducts = new Products([{Product_ID: 1},{Product_ID: 2},{Product_ID: 3, ItemNumber: 'ABC124', ProductName: 'Jacket 2', Price: 250.00, Image: "1301_L.jpg"},{Product_ID: 4, ItemNumber: 'ABC125', ProductName: 'Jacket 3', Price: 250.00, Image: "1302_L.jpg"},{Product_ID: 5, ItemNumber: 'ABC126', ProductName: 'Jacket 4', Price: 250.00, Image: "1440_L.jpg"},{Product_ID: 6, ItemNumber: 'ABC127', ProductName: 'Jacket 5', Price: 250.00, Image: "10001_L.jpg"}]);
	
	var newST = new ShipmentTabsView({el: $("#shipmentTabs"), model: orderGroup});
	newST.render();
	
	buildViews();
	
	//***************************************************************************************************************************
	//TEST: Rivets
	rivets.configure({
	  adapter: {
		subscribe: function(obj, keypath, callback) {
		  //obj.on('change:' + keypath, callback);
			if(obj instanceof Backbone.Collection && keypath === 'models') {
			  obj.on("add remove", function() { callback(obj.models) })
			} else {
			  obj.on("change:" + keypath, function(m, v) { callback(v) })
			}
		},
		unsubscribe: function(obj, keypath, callback) {
		  obj.off('change:' + keypath, callback);
		},
		read: function(obj, keypath) {
			return obj instanceof Backbone.Collection ? obj["models"] : obj.get(keypath);
		},
		publish: function(obj, keypath, value) {
		  obj.set(keypath, value);
		}
	  }
	});
	rivets.formatters.money = function(value){
	  return formatMoney(value);
	};	
	rivets.formatters.imageURL = function(value){
	  return "pics/" + value;
	};	
	/*
	RVProductView = Backbone.View.extend({
		render: function(){
			$(this.el).html(_.template($("#template-RVProductView").html()));
			rivets.bind($(this.el), {product: this.model});
		}
	});
	var ivRVData = Product.findOrCreate(1);
	var ivRVView = new RVProductView({el: $("#ivRV_UL"), model: ivRVData});
	ivRVView.render();
	*/
	
	RVProductsView = Backbone.View.extend({
		render: function(){
			$(this.el).html(_.template($("#template-RVProductsView").html()));
			rivets.bind($(this.el), {products: this.model});
		},

		events: {
			"click li": "handleClick",
		},
		
		handleClick: function(e) {
			switch($(e.target).closest("span").attr("action")) {
				case 'Add':
					Product.findOrCreate($(e.target).closest("li").attr("cid")).set("onOrder", true);
					break;
				case 'RemoveProduct':
				case 'RemoveQuantities':
					Product.findOrCreate($(e.target).closest("li").attr("cid")).set("onOrder", false);
					break;
			}
		}
	});
	var ivRVData = new Products([{Product_ID: 1, onOrder: true}, {Product_ID: 2}]);
	var ivRVView = new RVProductsView({el: $("#ivRV_UL"), model: ivRVData});
	ivRVView.render();
	$("#AddTest").on("click", function() {
		ivRVData.add(Product.findOrCreate(3));
	});
	$("#RemoveTest").on("click", function() {
		ivRVData.remove(Product.findOrCreate(2));
	});
	//***************************************************************************************************************************
});

function buildImageView(iShipment)
{
	if(imageView) {
		imageView.undelegateEvents();
	}
	imageView = new ImageView({el: $("#iv_DIV"), viewType: 'order', model: orderGroup.get("OrderGroupProducts"), shipment: iShipment});
	imageView.render();
}

function buildSearchView()
{
	if(searchView) {
		searchView.undelegateEvents();
	}
	searchView = new ImageView({el: $("#iv_SEARCH"), viewType: 'search', model: searchProducts});
	searchView.render();
}

function buildCarouselView(Product_ID)
{
	$("#pc_DIV").empty();
	var oProd = orderGroup.get("OrderGroupProducts").get(Product_ID);
	orderGroup.get("OrderHeaders").each(function(oOrd, iOrd) {
		var divId = "pc_" + oProd.get("ItemNumber") + "_" + (iOrd + 1);
		$("#pc_DIV").append('<div id="' + divId + '"></div>');
		var newCV = new GridView({el: $("#" + divId), model: orderGroup, shipment: (iOrd + 1), product: oProd, showShipmentHeader: true, showSizeRuns: true, showShipmentTotal: true, showButtons: false});
		newCV.render();
	});
	var newPC = new GridView({el: $("#pc_DIV_AT"), model: orderGroup, shipment: 0, product: oProd, showShipmentHeader: false, showSizeRuns: false, showShipmentTotal: true, showButtons: false});
	newPC.render();
}

function buildViews()
{
	// build list view
	var newLV = new ListView({el: $("#lv_ALL"), model: orderGroup});
	newLV.render();

	// build carousel view
	var newCV = new CarouselView({el: $("#carousel"), model: orderGroup.get("OrderGroupProducts")});
	newCV.render();
	buildCarouselView(1); // carousel view for first product
	
	// build classic view
	$("#cv_DIV").empty();
	orderGroup.get("OrderGroupProducts").each(function(oOProd, iOProd) {
		var rowId = "cv_ROW_" + (iOProd + 1);
		$("#cv_DIV").append('<div class="row" id="' + rowId + '"></div>');
	});
	orderGroup.get("OrderHeaders").each(function(oOrd, iOrd) {
		orderGroup.get("OrderGroupProducts").each(function(oProd, iProd) {
			var rowId = "cv_ROW_" + (iProd + 1);
			var divId = "cv_" + oProd.get("ItemNumber") + "_" + (iOrd + 1);
			$("#" + rowId).append('<div class="span6" id="' + divId + '"></div>');
			var newCV = new GridView({el: $("#" + divId), model: orderGroup, shipment: (iOrd + 1), product: oProd, showShipmentHeader: (iProd == 0), showStoreSelection: (iProd == 0), showSizeRuns: true, showShipmentTotal: false});
			newCV.render();
		});
	});
}

function addShipment()
{
	var nOH = orderGroup.get("OrderHeaders").length;
	if(nOH < 6) {
		orderGroup.get("OrderHeaders").add({RequestedShipDate: orderGroup.get("OrderHeaders").at(nOH-1).get("RequestedShipDate"), OrderName: '', RetailersPO: '', OrderDetails: []});
		buildViews();
	}
}
	
// Support for Size Runs
$(document).ready(function() {
	$.sizeRuns = new Object();
	
	$(".pasteSizeRun").addClass("disabled");
});

function formatMoney(n, c, d, t) {
var c = isNaN(c = Math.abs(c)) ? 2 : c, d = d == undefined ? "." : d, t = t == undefined ? "," : t, s = n < 0 ? "-" : "", i = parseInt(n = Math.abs(+n || 0).toFixed(c)) + "", j = (j = i.length) > 3 ? j % 3 : 0;
   return "$" + s + (j ? i.substr(0, j) + t : "") + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : "");
}

function showorderreview()
{
	$("#orderreview").toggle();
}

function runningtotaldetails(ww)
{
	$("#detailtotals").toggle();
	$("#simpletotals").toggle();	
}

function showsummary()
{
	$("#runningtotal").toggle().draggable();
}
  
function showlegend()
{
	$("#invlegend").toggle().draggable();
}

function xfertorep()
{
  hideallthings();
  $("#shipmentwindow").hide();
	$("#xFerToRep").show();
}

function SetBtnPrim()
{
  $("#xtrSub").removeClass('disabled');
  $("#xtrSub").removeAttr("disabled");
  $("#xtrSub").addClass('btn btn-primary');
}

function xfrSubClick()
{
  $("#xtrCan").removeClass('btn');
  $("#xtrCan").addClass('disabled');
  $("#xtrCan").attr('disabled', 'disabled');
  $("#xtrSub").removeClass('btn btn-primary');
  $("#xtrSub").addClass('btn btn-info');
  $("#xtrSub").html('Transferring to Rep');
  var t=setTimeout("xfrComplete()",3000);
}

function xfrComplete()
{
  $("#xtrSub").removeClass('btn btn-info');
  $("#xtrSub").addClass('btn btn-success');
  $("#xtrSub").html('Transfer Complete');
  $("#xtrSub").attr('disabled', 'disabled');
  $("#xferdivctrl").hide();
  $("#xtrSub").hide();
  $("#xtrCan").hide();
  $("#xfrDone").show();
}

function xfrCreateOrder()
{
  homePage();
  firemeup();
}

function homePage()
{
  hideallthings();
  $("#start").hide();
}

function getButtonPress(letter)
{
	var Retailers;
	if (letter == 'b')
	{
//	$("#retailerText").val('B');
//		Retailers = ['Backwoods Outfitters','Big R Stores B','Baesemans Inc','Bafs Inc','Bagy Jo Inc','Bailes Cobb Co Inc','Bairs Gulf','Bakers Shoe Company','Bananas Inc','Bar B Western Store','Bar Wb','Bargain Barn','Barn Dogs','Basics Clothing Company','Bay Supply','Beach House','Beacon Surplus','Bealls Outlet','Bear Hardware','Bear Mountain Outfitters','Beasleys','Becks Shoes','Bednarik Boots','Beerman Precision Inc','Bells Clothing','Belmont Hardware','Belstra Milling Co','Benett Stores Inc','Bennett Store','Bens','Berend Brothers','Berey Bros','Best Uniforms','Bfi','Big Bear Store','Big R','Big Red Shop','Bit By Bit','Blackbird','Blain Supply Inc','Bloomfield Feed','Blue Bandana Co','Blue Collar Basics','Blue Creek Merc','Blue Line Sports','Blusteins Inc'].sort();
	$("#dStores").hide();
	$("#bStores").show();
	}
	else
	{
//		$("#retailerText").val('D');
//		Retailers = ['DAGAN SALES','DAKOTAMART','Dan D-Ridge Outfitters','DAN RODGERS SPORTING GOODS','DANNCO SPORTS','Deep South Lacrosse','DEKA ATHLETICS','DELSPORTS','DENIS SPORT SHOP'].sort();
	$("#bStores").hide();
	$("#dStores").show();
	}

//	Retailers = ['Backwoods Outfitters','Big R Stores B','Baesemans Inc','Bafs Inc','Bagy Jo Inc','Bailes Cobb Co Inc','Bairs Gulf','Bakers Shoe Company','Bananas Inc','Bar B Western Store','Bar Wb','Bargain Barn','Barn Dogs','Basics Clothing Company','Bay Supply','Beach House','Beacon Surplus','Bealls Outlet','Bear Hardware','Bear Mountain Outfitters','Beasleys','Becks Shoes','Bednarik Boots','Beerman Precision Inc','Bells Clothing','Belmont Hardware','Belstra Milling Co','Benett Stores Inc','Bennett Store','Bens','Berend Brothers','Berey Bros','Best Uniforms','Bfi','Big Bear Store','Big R','Big Red Shop','Bit By Bit','Blackbird','Blain Supply Inc','Bloomfield Feed','Blue Bandana Co','Blue Collar Basics','Blue Creek Merc','Blue Line Sports','Blusteins Inc','DAGAN SALES','DAKOTAMART','Dan D-Ridge Outfitters','DAN RODGERS SPORTING GOODS','DANNCO SPORTS','Deep South Lacrosse','DEKA ATHLETICS','DELSPORTS','DENIS SPORT SHOP'].sort();

//	$("#retailerText").typeahead({source: Retailers, items:6});
//	$("#retailerText").trigger('keyup');     //this opens the typeahead drop down but breaks the onchange for the field
//	$("#retailerText").trigger('focus');
	
	if (letter == 'b')
	{
		$("#btnb").addClass('btn-primary');
		$("#btnd").addClass('btn-info');
		$("#btnb").removeClass('btn-info');
		$("#btnd").removeClass('btn-primary');
	}
	else
	{
		$("#btnd").addClass('btn-primary');
		$("#btnb").addClass('btn-info');
		$("#btnd").removeClass('btn-info');
		$("#btnb").removeClass('btn-primary');
	}
}

function getStore()
{
	$("#selRetailer").hide();
	$("#bStores").hide();
	$("#dStores").hide();
	$("#selRetailerAndStore").hide();
	firemeup();
}

function setStore()
{
	$("#selStore").hide();
	$("#selRetailerAndStore").hide();
	firemeup();
}

function showRetailerAndStore()
{
	$("#selRetailerAndStore").show();
	$("#retailerText").trigger('focus');
}

 function hideallthings()
{
	$("#browse").hide();
	$("#catalogimage").hide();
	$("#directions").hide();
	$(".imageView").hide();
	$("#imagebasedsearching").hide();
	$("#lineitementry").hide();
	//$("#lineitementry").hide();
	//$("#multipleshipments").hide();
	$("#multipleshipments").hide();
	$("ordergridonly").hide();
	//$("#ordergridonly").hide();
	$("#simple").hide();
	$("#worksheetvalues").hide();	
	$("#singleproductselect").hide();
	$("#step4").hide();
	$("#workbookview").hide();
	$("#colorlookordered").hide();
	$("#colorlooksearch").hide();
	$("#xFerToRep").hide();
	$("#SSOFDIV").hide();
	$("#orderFromTemplate").hide();
	$('.alert').hide();
} 
  
function showorderme()
{
	$("#orderme").show();
}
 function multiship()
{
	hideallthings();
	$("#orderedtab").show();
	$(".tabShipment").hide();
	buttonmoves(3);
	$("#multipleshipments").show();	
}

 function firemeup ()
{
	hideallthings();
	$("#start").show();
	$("#directions").show();
}

// Begin Support for SSOF Upload Functionality

$(document).ready(function() {
	$("#validationResultsTable").tablesorter({
		headers: {
			1:  { sorter: false },
			4:  { sorter: false }  
		},
		textExtraction: 'complex' 
	});
	$("#validationResultsTable").bind("sortStart", function() {
		// show or hide item subtotals depending on whether we're sorting by Item Number or not
		if($(this).data("sortCol") == "Item") {
			$(".ValShipSubtotal").show();
		} else {
			$(".ValShipSubtotal").hide();
		}
	});
	$("#validationResultsTable").bind("sortEnd", function() {
		$(this).data("sortCol",""); // clear this value in case we had a special sort
	});

	/*
	$(".dptarget").datepicker().on("changeDate", function(e) {
		$(this).text(dateFormat(e.date,"mmm d, yyyy"));
		$(this).datepicker("hide");
	});
	*/
});

function showSSOF()
{
	hideallthings();
	$("#start").hide();
	$("#directions").hide();
	$("#catalogselected").hide();
	$("#shipmentwindow").hide();
	
	showDownloadSSOF();
	
	$("#SSOFDIV").show();
}

function showDownloadSSOF()
{
	$("#downloadSSOFTab").addClass("active");
	$("#uploadSSOFTab").removeClass("active");

	$("#orderForm").val("");
	$("#uploadSSOF_TAB1").show();
	$("#uploadSSOF_TAB2").hide();

	$("#downloadSSOFDIV").show();
	$("#uploadSSOFDIV").hide();
}

function showUploadSSOF()
{
	$("#downloadSSOFTab").removeClass("active");
	$("#uploadSSOFTab").addClass("active");

	$("#downloadSSOFDIV").hide();
	$("#uploadSSOFDIV").show();
}

function doUploadSSOF()
{
	$(".alert").hide();
	if(!$("#orderForm").val()) {
		showAlert("#orderFormAlert","Please select an iVendix Order Form to upload.");
	} else if($("#orderForm").val().toLowerCase().indexOf(".xls") != ($("#orderForm").val().length - 4)) {
		showAlert("#orderFormAlert","The order form is not in the correct format. Your order cannot be uploaded.");
	} else {
		$("#uploadSSOF_TAB1").hide();
		$("#uploadSSOF_TAB2").show();
		showValidationSummary();
	}
}

function showValidationSummary()
{
	$("#validationSummary").addClass("active");
	$("#validationSummaryDIV").show();
	$("#validationShipment1").removeClass("active");
	$("#validationShipment1DIV").hide();
	$("#validationShowImages").attr("disabled","disabled");
}

function showValidationShipment1()
{
	$("#validationSummary").removeClass("active");
	$("#validationSummaryDIV").hide();
	$("#validationShipment1").addClass("active");
	$("#validationShipment1DIV").show();
	$("#validationShowImages").removeAttr("disabled");
}

function validationItemSort()
{
	// we need to flag when we're doing an item number sort so we know to show the item subtotals
	$("#validationResultsTable").data('sortCol','Item');
	$("#validationResultsTable").trigger("sorton",[[[0,0]]]);
}

function showAlert(selector,message,classes)
{
	classes = classes ? classes : "alert alert-error";
	var alertHTML = '<div class="' + classes + '">'
		+ '<a class="close" data-dismiss="alert" href="#">&times;</a>'
		+ '<h4>' + message + '</h4>'
		+ '</div>';
	$(selector).html(alertHTML).show();
}

function killAlerts(selector)
{
	$(selector).empty();
}

// Start Support for Order from a Template functionality

$(document).ready(function() {
	$("#templateTable").tablesorter({
		headers: {
			3:  { sorter: false }
		},
		textExtraction: 'complex' 
	});

	$("[name=templateSel]").bind("change",function() {
		$("#templateAlert2").empty();
	});
});

function orderFromTemplate()
{
	hideallthings();
	$("#start").hide();
	$("#directions").hide();
	$("#catalogselected").hide();
	$("#shipmentwindow").hide();
	
	$("#orderFromTemplate_TAB1").show();
	$("#orderFromTemplate").show();
	showAlert("#templateAlert","<b>Note: </b>Pricing and availability may differ.","alert");
}

function doUseSelectedTemplate()
{
	if($("[name=templateSel]:checked:visible").length == 0) {
		showAlert("#templateAlert2","Please select a template to use.");
	}
}


function searchtoggle()
{
	$("#searchdiv").toggle();
	$("#directions").hide();
}

function callordersearch()
{
	return;
}

function showorderedpallet()
{
	hideallthings();
	buttonmoves(5);
	$("#orderedtab").addClass('active');
	$("#searchresultstab").removeClass('active');
	$("#orderedtab").show();
	$(".tabShipment").hide();
	$("#colorlooksearch").hide();
	$("#colorlookordered").show();
}

 function colorlooktog()
{
	hideallthings();
	buttonmoves(5);
	$("#orderedtab").show();
	$(".tabShipment").hide();
	$("#colorlooksearch").show();
}

function colorpicadd(daObj)
{
	$(daObj).toggleClass('btn-success');
}

function showorderopt(switchme)
{
	hideallthings();
	if (switchme==1)
	{
		buttonmoves(2);
		$("#orderedtab").show();
		$(".tabShipment").hide();
		$("#lineitementry").show();	
		$("#searchresultstab").removeClass('active');
		$(".tabShipment").removeClass('active');
		$("#orderedtab").addClass('active');
	}
	if (switchme==2)
	{
		buildSearchView();

		$("#shipmentwindow").show();
		$("#orderedtab").hide();
		$(".tabShipment").show();
		$("#imagebasedsearching").show();
		buttonmoves(1);
		$("#searchresultstab").addClass('active');
		$(".tabShipment").removeClass('active');
		$("#orderedtab").removeClass('active');
	}
	if (switchme==7) //workbook view
	{
		$("#orderedtab").show();
		$(".tabShipment").hide();
		$("#workbookview").show();			
		$("#searchresultstab").removeClass('active');
		$(".tabShipment").removeClass('active');
		$("#orderedtab").addClass('active');
		buttonmoves(4);
	}

return;
}

function switchme4()
	{
		$("#singleproductselect").show();
	}

function switchme8()
{
	$("#removeorderbutton").show();
	$("#enterquantitiesbutton").show();
}

	
function switchme6()
{
	hideordergrid();
	$("#orderedcount").show();
	$("#removeorderbutton").show();
	$("#enterquantitiesbutton").show();
}

function switchme5()
{
	$("#ordergridonly").show();
}

function closeblowout() 
	{
		$("#singleproductselect").hide();
	}

function showshipment(iShipment)
	{
		buttonmoves(1);
		hideallthings();
		$("#shipmentwindow").show();
		buildImageView(iShipment);
		$("#iv_DIV").show();
		$("#worksheetvalues").show();	
		$("#searchresultstab").removeClass('active');
		$("#orderedtab").removeClass('active');
		$(".tabShipment").removeClass('active');
		$(".tabShipment[shipment=" + iShipment + "]").addClass('active');
	}
	
function flipshipments()
	{
		$("#shipmentwindowstart").toggle();
		$("#mainsearchbutton").addClass('btn-primary');
		$("#browse").toggle().draggable();
		$("#directions").hide();
		$("#shipmentwindow").toggle();	
	}
	
function navigationcheck()
	{
		$("#browse").toggle();
		$("#directions").hide();
	}

function runme(switchme)
	{
		$("#start").toggle();
		$("#catalogselected").toggle();
		$("#catalogimage").toggle();
		$("#directions").hide();
		$("#shipmentwindowstart").toggle();
		return;
	}

function removeorder()
{	
	addswitches();
}

function addswitches()
{
	$("#addtoorderbutton").toggle();
	$("#removeorderbutton").toggle();
}

function hideordergrid()
{
	$("#ordergridonly").hide();
}

function showadvancedsearch()
{
	$("#simplesearch").toggle();
	$("#moresearch").toggle();
	$("#lesssearch").toggle();
	$("#advancedsearch").toggle();
}
	
function buttonmoves(da)
{
	$("#imageviewbutton").removeClass('btn-info');
	$("#listviewbutton").removeClass('btn-info');
	$("#multipleviewbutton").removeClass('btn-info');
	$("#classicviewbutton").removeClass('btn-info');
	$("#colorviewbutton").removeClass('btn-info');

	if (da==1)
	{
	$("#imageviewbutton").addClass('btn-info');	
	}
	if (da==2)
	{
	$("#listviewbutton").addClass('btn-info');
	
	}
	if (da==3)
	{
	$("#multipleviewbutton").addClass('btn-info');
	
	}
	if (da==4)
	{
	$("#classicviewbutton").addClass('btn-info');
	
	}
	if (da==5)
	{
	$("#colorviewbutton").addClass('btn-info');
	}
}	

function multipleproductentry()
{
	$("#multipleproduct").toggle();
}

function callordersearch()
{
	$("#productfrompreviouw").toggle();
	$("#ordersearchreturn").hide();
}

function showorderreturn(daobj)
{
	$(daobj).hide();
	$("#ordersearchreturn").toggle();
}
  </script>
  
  <body>
	<div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
			<a class="brand" href="#"><img src="../../img/iVendix.png" style="height: 40px; background-color: white;"></a>
			<div class="nav-collapse" id="menu_DIV"></div>
        </div>
      </div>
    </div>

	<!-- Masthead
================================================== -->
  <div class="row" id="start" style="display:none;">
    <div class="span8">
        <div class="container" style="padding-left: 100px;">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
		  	<div class="span2" style="padding: 8px;">
			 <h4>Retailer <a href="##" title="click the link to pick a different retailer">Baesemans Inc</a></h4>
			</div>
			 <div class="btn-toolbar" style="margin-bottom: 9px">
				<div class="btn-group">
				  <a class="btn btn-primary" href="#"><i class="icon-pencil icon-white"></i> Select a Catalog</a>
				  <a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="#"><span class="caret"></span></a>
				  <ul class="dropdown-menu">
					<li><a href="#"  onclick="runme(1)">Fall 2012</a></li>
					<li><a href="#">Spring 2013</a></li>
					<li><a href="#">Fall 2013</a></li>
				  </ul>
				</div>
				<div class="btn-group">
				  <a class="btn" href="#" onclick="searchtoggle();"><i class="icon-search"></i> Search</a>
				 </div>
				<div class="btn-group">
				  <a class="btn btnOrderView btn-info" href="#" title="Image View" onclick="showorderopt(2)"><i class="icon-picture"></i></a>
				  <a class="btn btnOrderView" href="#" title="List Entry" onclick="showorderopt(1)"><i class="icon-list"></i></a>
				  <a class="btn btnOrderView" href="#" title="Product Carousel"  onclick="multiship()"><i class="icon-th"></i></a>
				  <a class="btn btnOrderView" href="#" title="iVendix Classic" onclick="showorderopt(7)"><i class="icon-th-list"></i></a>
				  <a class="btn btnOrderView" href="#" title="Canvas" onclick="colorlooktog()"><i class="icon-eye-open"></i></a>
				</div>

			  <div class="btn-group">
				  <a class="btn" href="#"><i class="icon-play"></i> Tools</a>
				  <a class="btn dropdown-toggle" data-toggle="dropdown" href="#"><span class="caret"></span></a>
				  <ul class="dropdown-menu">
					<li><a href="#" onclick="multipleproductentry()">Multiple product entry</a></li>
					<li><a href="#" onclick="callordersearch()">Products from Previous Order</a></li>
					<li class="divider"></li>
					<li><a href="#" title="Tranfer to Rep" onclick="xfertorep()">Transfer to Rep</a></li>
					<li><a href="#" title="Copy"></i>Copy Shipments</a></li>
					<li><a href="#" title="Clear">Clear Shipments</a></li>
					<li class="divider"></li>
					<li><a href="#" title="Inventory Legend" onclick="showlegend()">Inventory Legend</a></li>
				  </ul>
				</div>
				<div class="btn-group">
				  <a class="btn" href="#" title="Preview" onclick="showorderreview()"><i class="icon-zoom-in"></i></a>
				  <a class="btn" href="#" title="Summary" onclick="showsummary()"><i class="icon-book"></i></a>
				</div>
				<div class="btn-group">
				  <a class="btn" href="#" id="btnSave">Save</a>
				  <a class="btn" href="#"><i class="icon-shopping-cart"></i> Continue</a>
				</div>
	        </div><!-- /.button toolbar -->
		</div>
	</div>
  </div>	

<!--- add product name, item numbere and color --->
  	<div class="container" id="multipleshipmentswrapper">
  	<div class="container" id="multipleshipments" style="position:absolute;
		left:120px;
		top:178px;
		z-index: 3;
		display:none ">
		<div class="row" id="carousel"></div>
	<div class="row">
		<div id="abc123jacket" class="span10 offset1">
			<h3>ABC123 Jacket</h3>
			  <form class="form-search">

				<div id="pc_DIV">
				</div>

				<span class="label label-info">Aggregated Totals</span>
				<div id="pc_DIV_AT"></div>
			  </form>
					
		
		</div>
	</div>
	</div>		
	</div>



	 
    <div class="row" id="catalogselected" style="display:none;">
    <div class="span4">
        <div class="container" style="padding-left: 100px;">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          Retailer: Baesemans Inc
			 <div class="btn-toolbar" style="margin-bottom: 9px">
				<div class="btn-group">
				  <a class="btn" href="#" onclick="navigationcheck()"><i class="icon-folder-open"></i> Fall 2012</a>
				  <a class="btn dropdown-toggle" data-toggle="dropdown" href="#"><span class="caret"></span></a>
				  <ul class="dropdown-menu">
					<li><a href="#">Fall 2012</a></li>
					<li><a href="#">Spring 2013</a></li>
					<li><a href="#">Fall 2013</a></li>
				  </ul>
				</div>
				<div class="btn-group">
				  <a class="btn" href="#" onclick="searchtoggle()" id="mainsearchbutton"><i class="icon-search icon-white"></i> Search</a>
				</div>
				<div class="btn-group">
				  <a class="btn btn-info" href="#" title="Image View" onclick="showorderopt(2)" id="imageviewbutton"><i class="icon-picture"></i></a>
				  <a class="btn" href="#" title="List Entry" onclick="showorderopt(1)" id="listviewbutton"><i class="icon-list"></i></a>
				  <a class="btn" href="#" title="Product Carousel"  onclick="multiship()" id="multipleviewbutton"><i class="icon-th"></i></a>
				  <a class="btn" href="#" title="iVendix Classic" onclick="showorderopt(7)" id="classicviewbutton"><i class="icon-th-list"></i></a>
				  <a class="btn" href="#" title="Canvas" onclick="colorlooktog()" id="colorviewbutton"><i class="icon-eye-open"></i></a>
				</div>
			  <div class="btn-group">
				  <a class="btn" href="#"><i class="icon-play"></i> Tools</a>
				  <a class="btn dropdown-toggle" data-toggle="dropdown" href="#"><span class="caret"></span></a>
				  <ul class="dropdown-menu">
					<li><a href="#" onclick="multipleproductentry()">Multiple product entry</a></li>
					<li><a href="#" onclick="callordersearch()">Products from Previous Order</a></li>
					<li class="divider"></li>
					<li><a href="#" title="Tranfer to Rep" onclick="xfertorep()">Transfer to Rep</a></li>
					<li><a href="#" title="Copy"></i>Copy Shipments</a></li>
					<li><a href="#" title="Clear">Clear Shipments</a></li>
					<li class="divider"></li>
					<li><a href="#" title="Inventory Legend" onclick="showlegend()">Inventory Legend</a></li>
				  </ul>
				</div>
				<div class="btn-group">
				  <a class="btn" href="#" title="Preview" onclick="showorderreview()"><i class="icon-zoom-in"></i></a>
				  <a class="btn" href="#" title="Summary" onclick="showsummary()"><i class="icon-book"></i></a>
				</div>
				<div class="btn-group">
				  <a class="btn" href="#">Save</a>
				  <a class="btn" href="#"><i class="icon-shopping-cart"></i> Continue</a>
				</div>
	        </div><!-- /.button toolbar -->
		</div>
	</div>
  </div>	

		 	
	<!-- shipment nav idea -->
  <div class="row" id="shipmentwindowstart" style="padding-left: 100px; display: none;">
    <div class="span4">
		<ul class="nav nav-tabs">
		  <li class="active">
			<a href="#" class="active btn-primary" onclick="flipshipments()" style="color: white;"><i class="icon-edit icon-white"></i> Select Shipment Date</a>
		  </li>
		  <li>
			<a href="#" class="addShipment"><i class="icon-plus"></i> Add Shipment</a>
		  </li>
		</ul>
	</div>
  </div>	

	<!-- shipment nav idea -->
  <div class="row" id="shipmentwindow" style="padding-left: 100px; display: none;">
    <div class="span12" id="shipmentTabs"></div>
</div>	

	<!-- shipment nav idea -->
  <div class="row" id="worksheetvalues" style="padding-left: 100px; display: none; position:absolute; left: 80px; top: 168px; z-index:3;">
    <div class="span12">
		<form class="form-inline">
			<input type="search" class="input-xxlarge" style="margin: 0 auto;" placeholder ="Store" data-provide="typeahead" data-source='["BACKDOOR SPORTS 841 YAMPA AVENUE STEAMBOAT SPRINGS CO 80477","BADGER SPORTING GOODS 2814 Bryant Rd Madison WI 53713-3002","BADGER SPORTING GOODS 2814 BRYANT ROAD MADISON WI 53713","Logo Sportswear 708 Carpenter Ave Iron Mountain MI 49801-3306","SD&G 807 S Maple St Effingham IL 62401-2641","BABBITTS SPORTS CENTER SPORTS INC MEMBER# 696 FLAGSTAFF AZ 86001","DAKOTA OUTERWEAR 203 72ND AVENUE MINOT ND 58701","DAKOTA SPORTS 700 JACKSON BLVD RAPID CITY SD 57702","DAKOTA SPORTS, INC. 2802 WEST 41ST STREET SIOUX FALLS SD 57105","Dales Sporting Goods 106 S Main St China Grove NC 28023-2448","HAUFF SPORTING GOODS 714 PIERCE STREET SIOUX CITY IA 51101"]'>
			<input type="text" class="input-medium" placeholder ="Shipment Name" >
			<input type="text" class="input-medium" placeholder ="Retailers PO" >
		</form>
	</div>
</div>	



	<div class="row" id="searchdiv" style="display:none; position:absolute; left: 200px; top: 100px; z-index:10; ">
    <div class="span6">
		<form class="well form-search">
			<div id="simplesearch">
				<input type="text" class="input-large search-query" placeholder="product name">
				<input type="text" class="input-large search-query" placeholder="number" title="product/material/part/style/item">
			</div>
			<div id="advancedsearch" style="display:none;">
				<div class="controls" style="padding-top: 10px;">
				  Search by:
				  <select id="select02">
					<option>Number</option>
					<option>Product Name</option>
					<option>UPC</option>
				  </select>
				</div>
				  <div class="control-group">
					<div class="controls">
					  <textarea class="input-xlarge span5" id="textarea" rows="3" placeholder="Enter column data from a spreadsheet or comma delimited lists."></textarea>
					</div>
					<input type="text" class="input-large" placeholder="Color"></br>
					<input type="text" class="input-large"  placeholder="Color Code"></br>
					<input type="text" class="input-large" placeholder="Price Greater Than" title="Enter whole amounts, i.e. 10"></br>
					<input type="text" class="input-large" placeholder="Price Less Than"  title="Enter whole amounts, i.e. 10">
				  </div>
            <div class="controls" style="padding-top: 10px;">
				<div class="btn-mini btn-group">
				  <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
				    Catalog Navigation
				    <span class="caret"></span>
				  </a>
			        <ul class="dropdown-menu">
			          <li><a href="#">Mens</a></li>
			          <li><a href="#">- Jacket</a></li>
			          <li><a href="#">- Pant</a></li>
			          <li><a href="#">Womens</a></li>
			          <li><a href="#">Kids</a></li>
			        </ul>
				</div>

	              <select id="select01">
	                <option>Feature</option>
	                <option>Spec</option>
	                <option>Gender</option>
	              </select>					<input type="text" class="input-medium"></br>
				<input type="checkbox" value="orderedcolors"> Only ordered colors</br>
			  </div>
			</div>

				<p style="padding-top: 10px;" id="moresearch">
				<a href="#" onclick="showadvancedsearch()"><i class="icon-filter"></i>More Search Options</a>
				</p>
				<p style="padding-top: 4px; display: none;" id="lesssearch">
				<a href="#" onclick="showadvancedsearch()">Less Search Options</a>
				</p>
		
				<input type="checkbox" value="inventoryoff"> Exclude products without inventory
            <div class="controls" style="padding-top: 10px;">
				<h4>Sort</h4>
              <select id="select01">
                <option>Catalog Navigation</option>
                <option>Product Name</option>
                <option>Item Number</option>
              </select>
            </div>
			<p style="padding-top: 14px;">
				<button type="submit" class="btn-primary">Search</button>
			</p>
		</form>
      </div> <!-- /span4 -->
	</div>

	<div class="row" id="browse" style="display:none; position:absolute; left: 60px; top: 200px; z-index:8; ">
      <div class="well span4">
      	<div class="row">
	      	<div class=="span3">
		      	<h4>Select a category to see all products.</h4>
		        <ul class="nav nav-list">
		          <li><a href="#">Mens</a></li>
						<ul class="nav nav-list">
						  <li><a href="#"> jacket</a></li>
						  <li><a href="#"> pant</a></li>
						  <li><a href="#"> shoe</a></li>
						</ul>
		          <li><a href="#">Womens</a></li>
		          <li><a href="#">Kids</a></li>
		        </ul>
			</div>
			<div class="span1" onclick="navigationcheck()"><i class="icon-remove-sign"></i></div>
		</div>
      </div> <!-- /well -->
	</div>

    <div class="container">
		<p id="directions" style="display:none;"></p>
		<p style="text-align: center; display:none;" id="catalogimage">
		<img src="../../img/newcatalogimage.png">
	</p>		
   </div> <!-- /container -->

<div id="selRetailerAndStore"class="well span11" id="selRetailerAndStore"  style="position:absolute;
		left:100px;
		top:100px;
		z-index:100; display:none;">

	<div id="selRetailer">
		<b>Choose Retailer</b><br />
		<div class="btn-group" data-toggle="buttons-radio">
			<button class="btn">A</button>
			<button id="btnb" class="btn btn-info" onclick="getButtonPress('b')">B</button>
			<button class="btn">C</button>
			<button id="btnd" class="btn btn-info" onclick="getButtonPress('d')">D</button>
			<button class="btn">E</button>
			<button class="btn">F</button>
			<button class="btn">G</button>
			<button class="btn">H</button>
			<button class="btn">I</button>
			<button class="btn">J</button>
			<button class="btn">K</button>
			<button class="btn">L</button>
			<button class="btn">M</button>
			<button class="btn">N</button>
			<button class="btn">O</button>
			<button class="btn">P</button>
			<button class="btn">Q</button>
			<button class="btn">R</button>
			<button class="btn">S</button>
			<button class="btn">T</button>
			<button class="btn">U</button>
			<button class="btn">V</button>
			<button class="btn">W</button>
			<button class="btn">X</button>
			<button class="btn">Y</button>
			<button class="btn">Z</button>
			<button class="btn">0-9</button>
			<button class="btn">*</button>
		</div>
		Search Type:
		<select id="selectStore"> 
			<option value="2">Retailer Name</option>
			<option value="2">Store Name</option>
			<option value="3">Account Number</option>
			<option value="4">Country</option>
			<option value="5">State</option>
			<option value="6">City</option>
		</select>   

		Search Text: 
		<input type="search" name="retailerText" id="retailerText" class="search-query span3" style="margin: 0 auto;" />
	</div>
	<div id="bStores"  style="display:none;">
		<ul class="nav nav-list">
		<li><a href="#" onclick="getStore()"><i class="icon-plus"></i>B2B - MTN.TAC.OUT. INVENTORY ONLY (0010398348)</a></li>
		<li><a href="#" onclick="getStore()"><i class="icon-minus"></i>BABBITTS SPORTS CENTER (0010002794)</a></li>
		<li>Stores</li>
		<li><a href="#">&nbsp;&nbsp;&nbsp;BABBITTS SPORTS CENTER 	109 NORTH LEROUX STREET FLAGSTAFF AZ 86001</a></li>
		<li><a href="#">&nbsp;&nbsp;&nbsp;BABBITTS SPORTS CENTER 	SPORTS INC MEMBER# 696 FLAGSTAFF AZ 86001</a></li>
		<li><a href="#" onclick="getStore()"><i class="icon-plus"></i>BACK COUNTRY EXPERIENCES (0010185630)</a></li>
		<li><a href="#" onclick="getStore()"><i class="icon-plus"></i>BACK NINE BOUTIQUE (0010751297)</a></li>
		<li><a href="#" onclick="getStore()"><i class="icon-plus"></i>1 TAYLOR AVENUE DOYLESTOWN PA 18901</a></li>
		<li><a href="#" onclick="getStore()"><i class="icon-plus"></i>BACKCOUNTRY.COM (0010171918)</a></li>
		<li><a href="#" onclick="getStore()"><i class="icon-minus"></i>BACKDOOR SPORTS (0010001789)</a></li>
		<li>Stores</li>
		<li><a href="#">&nbsp;&nbsp;&nbsp;BACKDOOR SPORTS 	841 YAMPA AVENUE STEAMBOAT SPRINGS CO 80477</a></li>
		<li><a href="#" onclick="getStore()">Backwood Bargain Outfitters (0012846999)</a></li>
		<li><a href="#" onclick="getStore()">Backwoods Archery (0012353342)</a></li>
		<li><a href="#" onclick="getStore()">Bacon & Co., Inc (0011449860)</a></li>
		<li><a href="#" onclick="getStore()">BADGE'S 911 (0010001813)</a></li>
		<li><a href="#" onclick="getStore()"><i class="icon-minus"></i>BADGER SPORTING GOODS (0010002797)</a></li>
		<li>Stores</li>
		<li><a href="#">&nbsp;&nbsp;&nbsp;BADGER SPORTING GOODS 	2814 Bryant Rd Madison WI 53713-3002</a></li>
		<li><a href="#">&nbsp;&nbsp;&nbsp;BADGER SPORTING GOODS 	2814 BRYANT ROAD MADISON WI 53713</a></li>
		<li><a href="#">&nbsp;&nbsp;&nbsp;Logo Sportswear 	708 Carpenter Ave Iron Mountain MI 49801-3306</a></li>
		<li><a href="#">&nbsp;&nbsp;&nbsp;SD&G 	807 S Maple St Effingham IL 62401-2641</a></li>
		<li><a href="#" onclick="getStore()"><i class="icon-plus"></i>Badlands Outfitters (0011179171)</a></li>
		<li><a href="#" onclick="getStore()"><i class="icon-plus"></i>BAHNHOFF SKI SHOP (0010346935)</a></li>
		</ul>
 	</div>
	<div id="dStores"  style="display:none;">
		<ul class="nav nav-list">
		<li><a href="#" onclick="getStore()"><i class="icon-plus"></i>DAGAN SALES & MARKETING (0010003104)</a></li>
		<li><a href="#" onclick="getStore()"><i class="icon-minus"></i>DAKOTA OUTERWEAR (0010001129)</a></li>
		<li>Stores</li>
		<li><a href="#">&nbsp;&nbsp;&nbsp;DAKOTA OUTERWEAR 	203 72ND AVENUE MINOT ND 58701</a></li>
		<li><a href="#">&nbsp;&nbsp;&nbsp;DAKOTA OUTERWEAR 	203 72ND AVENUE MINOT ND 58701</a></li>
		<li><a href="#" onclick="getStore()"><i class="icon-plus"></i>DAKOTA SCATTERGUNS DBA GARYS GUN SH (0010204807)</a></li>
		<li><a href="#" onclick="getStore()"><i class="icon-minus"></i>DAKOTA SPORTS (0010003105)</a></li>
		<li>Stores</li>
		<li><a href="#">&nbsp;&nbsp;&nbsp;DAKOTA SPORTS 	2802 WEST 41ST STREET SIOUX FALLS SD 57105</a></li>
		<li><a href="#">&nbsp;&nbsp;&nbsp;DAKOTA SPORTS 	700 JACKSON BLVD RAPID CITY SD 57702</a></li>
		<li><a href="#">&nbsp;&nbsp;&nbsp;DAKOTA SPORTS, INC. 	2802 WEST 41ST STREET SIOUX FALLS SD 57105</a></li>
		<li><a href="#">&nbsp;&nbsp;&nbsp;HAUFF SPORTING GOODS 	714 PIERCE STREET SIOUX CITY IA 51101</a></li>
		<li><a href="#" onclick="getStore()"><i class="icon-plus"></i>DAKOTAMART (0010000947)</a></li>
		<li><a href="#" onclick="getStore()"><i class="icon-minus"></i>Dale's Sporting Goods (0011133547)</a></li>
		<li>Stores</li>
		<li><a href="#">&nbsp;&nbsp;&nbsp;Dale's Sporting Goods 	106 S Main St China Grove NC 28023-2448</a></li>
		<li><a href="#" onclick="getStore()"><i class="icon-plus"></i>DALE'S WINNING EDGE (0010001599)</a></li>
		<li><a href="#" onclick="getStore()"><i class="icon-plus"></i>DALLAS PUBLIC SAFETY (0010000124)</a></li>
		<li><a href="#" onclick="getStore()"><i class="icon-plus"></i>Dan D-Ridge Outfitters (0012626801)</a></li>
		</ul>
 	</div>
	<div id="selStore" style="display:none;">
		Retailer: Baesemans Inc<br /><br />
		Store: 
		<select id="selectStore" onchange="setStore()"> 
			<option value="0">North Store</option>
			<option value="1">South Store</option>
			<option value="2">Downtown Store</option>
			<option value="3">Midtown Store</option>
		</select>   
	</div>
</div>		

   <div class="well span5" id="runningtotal" style="position:absolute;
		left:600px;
		top:118px;
		z-index:100; display:none;">
		<div class="row"  id="simpletotals">
			<div class="span4">
			<table class="table table-striped">
				<tr>
					<th>Shipment</th>
					<th>Qty</th>
					<th>Amount</th>
				</tr>
				<tr>
					<td><span class="label label-info">Jul 1, 2012</span></td>
					<td>10</td>
					<td>$2,500</td>
				</tr>
				<tr>
					<td><span class="label label-info">Sep 1, 2012</span></td>
					<td>10</td>
					<td>$2,500</td>
				</tr>
				<tr>
					<th>Totals</th>
					<td>20</td>
					<td>$5,000</td>
				</tr>
			</table>
			<a href="#" class="btn" onclick="runningtotaldetails(0)" >More Details</a>
			</div>
			<div class="span1" onclick="showsummary()"><i class="icon-remove-sign"></i></div>
		</div>
		<div class="row"  id="detailtotals" style="display:none;">
			<div class="span4">
			<table class="table table-striped">
				<tr style="background-color: #B0B0B0">
					<th>Category</th>	
					<th>Qty</th>	
					<th>Total</th>	
				</tr>
				<tr>
					<th colspan="3"><span class="label  label-info">Jul 1, 2012</span></td>
				</tr>
				<tr>
					<th>Mens/Jackets</th>
					<td>10</td>
					<td>$2,500</td>
				</tr>
				<tr>
					<th>Total</th>
					<td>10</td>
					<td>$2,500</td>
				</tr>
				<tr>
					<th colspan="3"><span class="label label-info">Sep 1, 2012</span></td>
				</tr>
				<tr>
					<th>Mens/Jackets</th>
					<td>10</td>
					<td>$2,500</td>
				</tr>
				<tr>
					<th>Total</th>
					<td>10</td>
					<td>$2,500</td>
				</tr>
				<tr>
					<th>Grand Total</th>
					<td>20</td>
					<td>$5,000</td>
				</tr>
			</table>
			<a href="#" class="btn" onclick="runningtotaldetails(1)" >Less Details</a>
			</div>
			<div class="span1" onclick="showsummary()"><i class="icon-remove-sign"></i></div>
		</div>
	</div>

  <div class="well span6" id="invlegend" style="position:absolute;
		left:600px;
		top:300px;
		z-index:100; display:none;">
		<div class="span4">
			Fall 2012
			<table class="table-condensed table-bordered">
				<tr>
					<td style="background-color: white;border:1px solid #999999;height:12px;width:30px;"></td>
					<td>Available</td>
				</tr>
				<tr>
					<td style="background-color: black;border:1px solid #999999;height:12px;width:30px;"></td>
					<td>Not Available</td>
				</tr>
				<tr>
					<td style="background-color: yellow;border:1px solid #999999;height:12px;width:30px;"></td>
					<td>Inventory Available is Less Than 13</td>
				</tr>
				<tr>
					<td style="background-color: red;border:1px solid #999999;height:12px;width:30px;"></td>
					<td>No More Inventory</td>
				</tr>
				<tr>
					<td style="background-color: green;border:1px solid #999999;height:12px;width:30px;"></td>
					<td>More Than 250 Available</td>
				</tr>
				<tr>
					<td style="background-color: grey;border:1px solid #999999;height:12px;width:30px;"></td>
					<td>Not Available To Ship Until Date Shown</td>
				</tr>
			</table>
      Last Inventory Update: 05/01/2012 7:14 PM MDT
		</div>
		<div class="span1" onclick="showlegend()"><i class="icon-remove-sign"></i></div>
	</div>
   
	<div class="row" id="xFerToRep" style="display:none; position:absolute; left: 300px; top: 148px; z-index:8; ">
    <div class="span6 well">
      <H2 style="text-align:center">Transfer To Representative</H2>
			<div id="xferdivctrl" class="controls">
        Sales Rep:
        <select id="selectxfr" onchange="SetBtnPrim()"> 
          <option value="0">Choose one...</option>
          <option value="1">Charline Brown</option>
          <option value="2">Jim Smith</option>
          <option value="3">Samantha Tanner</option>
        </select>   
        <label class="checkbox"><input type="checkbox"> Send comments via an email to the sales rep.</label>
        <textarea class="input-xlarge" id="textarea" rows="3" placeholder ="Comments:  Note: This is an alert that may go to more than one recipient." ></textarea>
        <br />
			</div>
      <button type="submit" id="xtrSub" onclick="xfrSubClick()" class="disabled" disabled="disabled">Transfer To Rep</button> 
      <button type="button" id="xtrCan" class="btn" onclick="hideallthings()" class="btn">Cancel</button> 
      <div id="xfrDone" style="display:none;">
        <button type="submit" id="xtrSub" class="btn btn-success" disabled="disabled">Transfer Complete</button> 
        <button type="button" id="xtrNewOrder" class="btn btn-primary" onclick="xfrCreateOrder()" class="btn">Create a New Order</button> 
        <button type="button" id="xtrHome" class="btn btn-primary" onclick="homePage()" class="btn">Go To Home Page</button> 
      </div>
    </div>
	</div>

   <div id="lineitementrywrapper">
   	<div class="container" id="lineitementry" style="position:absolute;
													left:90px;
													top:180px;
													z-index:3; display:none;">
  
  <div class="span8 offset1">
		<form class="form-search">
			<a href="#" class="btn">Display Images</a>
			<a href="#" class="btn">Hide lines without quantity entered</a>
			<div id="lv_ALL"></div>
		</form>
    </div>
	</div>
	</div>

	<div id="ordergridonlywrapper">
   	<div class="container" id="ordergridonly" style=" position:absolute;
													left:160px;
													top:300px;
													z-index: 20; display:none; ">
		<div class="span6 well">
		  <div>
			<form class="form-search">
			<ul class="nav nav-tabs">
			  <li class="active">
				<a href="#" class="active">Jul 1, 2012</a>
			  </li>
			  <li>
				<a href="#">Sep 1, 2012</a>
			  </li>
			 </ul>
					<div id="ivgrid_DIV"></div>
		</form>
		  </div>
		</div>
	</div>
	</div>
<div  id="imagebasedsearchingwrapper">
   	<div class="container" id="imagebasedsearching"  style="position:absolute;
													left:90px;
													top:180px;
													z-index: 3; display:none; ">
		<div class="span6" style="position:relative; left:800px; z-index: 6;" >
				<div class="pagination">
				  <ul>
				    <li><a href="#">Prev</a></li>
				    <li class="active">
				      <a href="#">1</a>
				    </li>
				    <li><a href="#">2</a></li>
				    <li><a href="#">3</a></li>
				    <li><a href="#">4</a></li>
				    <li><a href="#">Next</a></li>
				  </ul>
				</div>
		</div>
		<div class="span12" id="iv_SEARCH"></div>
	</div>
	</div>
	<div id="iv_DIV" class="container imageView" shipment="' + shipment + '"  style="position:absolute; left:90px; top:198px; z-index: 3;"></div>
	<div id="ivRV_DIV" class="container imageView" shipment="' + shipment + '"  style="position:absolute; left:90px; top:198px; z-index: 3;">
		<ul class="thumbnails" id="ivRV_UL">
		</ul>
		<span class="btn" id="AddTest">Add to Collection</span>
		<span class="btn" id="RemoveTest">Remove from Collection</span>
	</div>
	
   	<div class="container well" id="singleproductselect"  style="position:absolute;
													left:100px;
													top:160px;
													z-index: 8; display:none; ">
		<div class="span6">
			<span class="btn" onclick="switchme8()">
				  <i class="icon-plus"></i>
			 </span>
			  <span class="btn" onclick="switchme5()">
				<i class="icon-edit"></i>
			  </span>
			  <span class="btn" onclick="closeblowout()" title="Close">
				<i class="icon-remove"></i>
			  </span>
			<ul class="thumbnails">
			  <li class="span3">
				<a href="#" class="thumbnail">
				  <img src="pics/10004_L.jpg" alt="">
				 </a>
				  <h5>ABC123</h5>
				  <p>Jacket 1</p>
				  <p>$250.00</p>
				</li>
			</ul>
			<ul class="thumbnails">
			  <li class="span1">
				<a href="#" class="thumbnail">
				  <img src="pics/10004_L.jpg" alt="">
				 </a>
				  <h5>Blue</h5>
				</li>
			  <li class="span1">
				<a href="#" class="thumbnail">
				  <img src="pics/10005_L.jpg" alt="">
				 </a>
				  <h5>Grey</h5>
				</li>
			  <li class="span1">
				<a href="#" class="thumbnail">
				  <img src="pics/10006_L.jpg" alt="">
				 </a>
				  <h5>Red</h5>
				</li>
			  <li class="span1">
				<a href="#" class="thumbnail">
				  <img src="pics/10007_L.jpg" alt="">
				 </a>
				  <h5>Yellow</h5>
				</li>
			</ul>
		</div>
		<div class="span3" style="padding-top: 10px;">
			<h3>ABC123 Jacket 1</h3> 
			<h3>$250</h3> 
			<h4>Features</h4> 
			<p>Waterproof Zipper</br>
			Lined Pockets
			</p> 
		</div>
	</div>

   	<div class="container" id="workbookview" style="position:absolute;
													left:110px;
													top:198px;
													z-index: 3; display:none;">
	<form class="form-search">
		<div class="row">
			<div class="span2">
			<a href="#" class="btn">Display Images</a>
			<!---	<img src="pics/10004_L.jpg" alt="" class="thumbnail">
				  <h5>ABC123 Jacket 1</h5>
				  <p>$250.00</p>
				  <p><i class="icon-info-sign" title="More Product Information"></i></p> --->
			</div>
		</div>
		<div class="row" id="cv_DIV"></div>
			<div class="row">
				<h4>Summary Information</h4>
				<div class="span12" style="text-align: center;">
						<div class="row">
						<div class="span6">
							<table class="table table-striped">
								<tr>
									<td>10</td>
									<td>$250.00</td>
									<td>$2,500.00</td>
								</tr>
							</table>
						</div>
						<div class="span6">
									<table class="table table-striped">
										<tr>
											<td>10</td>
											<td>$250.00</td>
											<td>$2,500</td>
										</tr>
									</table>
						</div>
						</div>
					<div class="span12">
						<table class="table table-striped">
							<tr>
								<td>20</td>
								<td>$250.00</td>
								<td>$5,000</td>
							</tr>
						</table>
					</div>
				</div>
			</div>
		</form>
	</div>


	<div class="row well" id="colorlooksearch" style="position:absolute; background-color: white; left:140px; top:168px; z-index:20; display:none; ">
		<h2>Canvas</h2>
			<table class="table table-striped">
				<thead>
					<tr>
						<th>Product Information</th>						
						<th colspan="2">Your Size Run</th>						
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>
							<h4>XYZ123, Jacket 5 $250.00</h4>
							<ul class="thumbnails">
								<li class="span2" title="XYZ123, Gray, $250.00">
								<img src="pics/1300_L.jpg" alt=""><br><a href="#" onclick="colorpicadd(this)" class="btn-mini"><i class="icon-plus"></i>Smoke</a>
								</li>
								<li class="span2" title="XYZ123, Black, $250.00">
								<img src="pics/1301_L.jpg" alt=""><br><a href="#" onclick="colorpicadd(this)" class="btn-mini"><i class="icon-plus"></i>Black</a>
								</li>
								<li class="span2" title="XYZ123, Black, $250.00">
								<img src="pics/1302_L.jpg" alt=""><br><a href="#" onclick="colorpicadd(this)" class="btn-mini"><i class="icon-plus"></i>Black/Red</a>
								</li>
								<li class="span2" title="XYZ123, Tan, $250.00">
								<img src="pics/1440_L.jpg" alt=""><br><a href="#" onclick="colorpicadd(this)" class="btn-mini"><i class="icon-plus"></i>Tan</a>
								</li>
							</ul>							
						</td>
						<td>
							<input type="text" class="span1" placeholder="XS"><input type="text" class="span1" placeholder="S"><input type="text" class="span1" placeholder="M"><input type="text" class="span1" placeholder="L"><input type="text" class="span1" placeholder="XL">
						</td>						
						<td><input class="btn" type="button" value="Order" onclick="colorpicadd(this)"></td>						
					</tr>
					<tr>
						<td>
						<h4>ABC123, Jacket 2 $250.00</h4>
						<ul class="thumbnails">
							<li class="span2" title="ABC123, Blue, $250.00">
							<img src="pics/10004_L.jpg" alt=""><br><a href="#" onclick="colorpicadd(this)" class="btn-mini"><i class="icon-plus"></i>Blue</a>
							</li>
							<li class="span2" title="ABC123, Gray, $250.00">
							<img src="pics/10005_L.jpg" alt=""><br><a href="#" onclick="colorpicadd(this)" class="btn-mini"><i class="icon-plus"></i>Grey</a>
							</li>
							<li class="span2" title="ABC123, Red, $250.00">
							<img src="pics/10006_L.jpg" alt=""><br><a href="#" onclick="colorpicadd(this)"  class="btn-mini"><i class="icon-plus"></i>Red</a>
							</li>
							<li class="span2" title="ABC123, Yellow, $250.00">
							<img src="pics/10007_L.jpg" alt=""><br><a href="#" onclick="colorpicadd(this)" class="btn-mini"><i class="icon-plus"></i>Yellow</a>
							</li>
						</td>
						<td>
							<input type="text" class="span1" placeholder="XS"><input type="text" class="span1" placeholder="S"><input type="text" class="span1" placeholder="M"><input type="text" class="span1" placeholder="L"><input type="text" class="span1" placeholder="XL">
						</td>						
						<td><input class="btn" type="button" value="Order" onclick="colorpicadd(this)"></td>						
					</tr>
				</tbody>				
			</table>
	</div>

	<div class="row well" id="colorlookordered" style="position:absolute; background-color: white; left:140px; top:150px; z-index:9; display:none; ">
		<h2>Canvas</h2>
		<div style="position:absolute; left:800px; top:40px; z-index:8;"><i class="icon-arrow-up" title="Bring selected image forward"></i><i class="icon-arrow-down"  title="Send selected image backward"></i> <i class="icon-print"></i></div>
			Arrange by <div class="btn-group" data-toggle="buttons-radio">
				  <button class="btn">Shipment</button>
				  <button class="btn">Catalog</button>
				  <button class="btn">Color</button>
				  <button class="btn">Gender</button>
				</div>

					<div class="span8 ui-widget-content" style="padding-top: 8px;">
								<ul class="thumbnails">
									<li class="span1"><div id="orderimage1" class="ui-widget-content" title="ABC123, blue, $250.00"><img src="pics/10007_bl_L_Ordered.png" alt=""></div></li>
									<li class="span1"><div id="orderimage2" class="ui-widget-content" title="ABC123, Yellow, $250.00"><img src="pics/10007_L_Ordered.png" alt=""></div></li>
								</ul>
					
					<div class="well" style="position:absolute; left:400px; top:400px; z-index:8;"> <i class="icon-trash"></i></div>

					</div>
	</div>
	

	<div class="span6 well" id="orderreview" style="position:absolute; left:400px; top:118px; z-index:90; display:none; ">
		<h2>Order Review</h2>
		Order Review Information will go here.
	</div>

<div class="span8 well" id="multipleproduct" style="position:absolute; left:400px; top:118px; z-index:90; display:none; ">
		<div class="controls" style="padding-top: 10px;">
		<h3>Multiple Product Entry</h3>
		  Search by
	  		  <select id="select02">
				<option>Number</option>
				<option>Product Name</option>
				<option>UPC</option>
				<option>SKU</option>
			  </select>
			</div>
			  <div class="control-group">
				<div class="controls">
				  <textarea class="input-xlarge span6" id="cutpaste" rows="30" placeholder="Enter column data from a spreadsheet or enter comma delimited lists. For Example: abcdef, 1 (abcdef is the sku or upc, 1 is the quantity requested)"></textarea>
				</div>
			</div>
			<button class="btn btn-primary" value="Submit" onclick="multipleproductentry()">Submit</button><button class="btn" value="Submit" onclick="multipleproductentry()">Cancel</button>
		</div>

<div class="span8 well" id="productfrompreviouw" style="position:absolute; left:450px; top:100px; z-index:90; display:none; ">
		<div class="controls" style="padding-top: 10px;" id="ordersearchcall"
		<h3>Order Search</h3>
			<p> Order search will be inserted here. </p>
			<button class="btn btn-primary" value="Submit" onclick="showorderreturn(this);">Submit</button><button class="btn" value="Submit" onclick="callordersearch();">Cancel</button>
		</div>
		<div class="controls" style="padding-top: 10px; display: none;" id="ordersearchreturn">
		<h4>Products on order</h4>
        <label class="checkbox"><input type="checkbox" checked="checked" />Include order quantities</label>
			<table class="table table-bordered table-striped"> 
				<thead>
					<tr>
						<th><input type="checkbox" class="checkbox" checked="true"></th>
						<th>Number</th>
						<th>Product Name</th>
						<th>Color</th>
						<th>Size</th>
						<th>Quantity</th>
					</tr>	
				</thead>
				<tbody>
					<tr>
						<td><input type="checkbox" class="checkbox" checked="true"></td>
						<td>ABC123</td>
						<td>Jacket</td>
						<td>Red</td>
						<td>XS</td>
						<td>6</td>
					</tr>	
					<tr>
						<td><input type="checkbox" class="checkbox" checked="true"></td>
						<td>ABC123</td>
						<td>Jacket</td>
						<td>Red</td>
						<td>S</td>
						<td>6</td>
					</tr>	
					<tr>
						<td><input type="checkbox" class="checkbox" checked="true"></td>
						<td>ABC123</td>
						<td>Jacket</td>
						<td>Red</td>
						<td>M</td>
						<td>6</td>
					</tr>	
					<tr>
						<td colspan="6"><button class="btn btn-primary" value="Submit">Submit</button><button class="btn" value="Submit">Cancel</button></td>
					</tr>	
				</tbody>
			</table>
		</div>
</div>

<div class="span12" id="SSOFDIV" style="display:none;">
	<div class="span12"><h3>iVendix Order Forms</h3><br /></div>
	<div class="span12">
		<ul class="nav nav-tabs">
		  <li class="" id="downloadSSOFTab">
			<a href="#" onclick="showDownloadSSOF()">Download iVendix Order Form</a>
		  </li>
		  <li class="active" id="uploadSSOFTab">
			<a href="#" onclick="showUploadSSOF()">Upload iVendix Order Form</a>
		  </li>
		</ul>
	</div>
	<div class="span12" id="downloadSSOFDIV" style="display:none;">
		<table class="table-condensed">
			<tbody>
				<tr>
					<th style="text-align:right; vertical-align:top;">About the iVendix Order Form</th>
					<td style="vertical-align:top;">Use this to create a spreadsheet from a catalog and build your order offline or while logged out of iVendix. Once your spreadsheet is complete and you are ready to submit your order, log back into iVendix and upload it through the Create Order button. An Instructions tab is contained within the spreadsheet.</td>
				<tr>
				<tr>
					<th style="text-align:right; vertical-align:top;">Requirements</th>
					<td style="vertical-align:top;">Windows&reg;: Microsoft&reg; Excel 2003 or betterMac: Microsoft&reg; Excel 2011 for Mac</td>
				</tr>
				<tr>
					<th style="text-align:right; vertical-align:top;">Catalog</th>
					<td>
						<select class="FT" id="selCatalog" onchange="$('.ssofDLRow').show();">
							<option value="">Select a Catalog...</option>
							<option value="250,699">SIH TEST 03 [USD] [01]</option>
							<option value="255,704">SIH TEST 05 [USD] [01]</option>
							<option value="1,3">Adults 2011-2012 [CAD] [03]</option>
							<option value="1,10">Adults 2011-2012 [USD] [01]</option>
							<option value="5,6">Boundary 2011-2012 [CAD] [03]</option>
							<option value="5,2">Boundary 2011-2012 [USD] [01]</option>
							<option value="72,299">Closeout 2009-2010 [CAD] [03]</option>
							<option value="72,298">Closeout 2009-2010 [USD] [01]</option>
							<option value="4,9">Closeout 2010-2011 [CAD] [03]</option>
							<option value="4,4">Closeout 2010-2011 [USD] [01]</option>
							<option value="3,11">Combined 2010-2011 [CAD] [03]</option>
							<option value="3,12">Combined 2010-2011 [USD] [01]</option>
							<option value="73,300">Essentials 2010-2011 [CAD] [03]</option>
							<option value="73,297">Essentials 2010-2011 [USD] [01]</option>
							<option value="6,5">Essentials 2011-2012 [CAD] [03]</option>
							<option value="6,1">Essentials 2011-2012 [USD] [01]</option>
							<option value="2,7">Kids 2011-2012 [CAD] [03]</option>
							<option value="2,8">Kids 2011-2012 [USD] [01]</option>
							<option value="74,296">Mens Frontier 2010-2011 [USD] [01]</option>
						</select>
					</td>
				</tr>
				<tr id="ssofViewRetailersRow" class="ssofDLRow" style="display:none">
					<th></th>
					<td>
						<a>View retailers that can order from this catalog</a>
					</td>
				</tr>
				<tr id="ssofFormatRow" class="ssofDLRow" style="display:none">
					<th style="text-align:right; vertical-align:top;">Format</th>
					<td>
						<label class="radio"><input type="radio" name="downloadSSOFFormat">Grid Format</label>
						<label class="radio"><input type="radio" name="downloadSSOFFormat">Line Item Format</label>
					</td>
				</tr>
				<tr id="ssofCategoriesRow" class="ssofDLRow" style="display:none">
					<th style="text-align:right; vertical-align:top;">Categories</th>
					<td>
						<label class="checkbox"><input type="checkbox" checked>Mens</label>
						<label class="checkbox"><input type="checkbox" checked>Ladies</label>
					</td>
				</tr>
				<tr style="display:none;" id="ssofCapacityRow">
					<th style="text-align:right; vertical-align:top;">Capacity of Spreadsheet</th>
					<td>
						<div id="capacityText"></div>
					</td>
				</tr>
				<tr id="ssofShipmentsRow" class="ssofDLRow" style="display:none">
					<th style="text-align:right; vertical-align:top;">Shipments</th>
					<td>
						<a href="#" class="ssofShipment"><i class="icon-edit dpicon" data-date="2012-06-01" data-date-format="yyyy-mm-dd"></i><span class="label label-info dptarget">Select Date</span><i class="icon-remove" onclick="$(this).parent().hide();"></i></a>
						<a href="#" class="ssofShipment" style="display:none; margin-left:10px;"><i class="icon-edit dpicon" data-date="2012-06-01" data-date-format="yyyy-mm-dd"></i></i><span class="label label-info dptarget">Select Date</span><i class="icon-remove" onclick="$(this).parent().hide();"></i></a>
						<a href="#" class="ssofShipment" style="display:none; margin-left:10px;"><i class="icon-edit dpicon" data-date="2012-06-01" data-date-format="yyyy-mm-dd"></i></i><span class="label label-info dptarget">Select Date</span><i class="icon-remove" onclick="$(this).parent().hide();"></i></a>
						<a href="#" class="ssofShipment" style="display:none; margin-left:10px;"><i class="icon-edit dpicon" data-date="2012-06-01" data-date-format="yyyy-mm-dd"></i></i><span class="label label-info dptarget">Select Date</span><i class="icon-remove" onclick="$(this).parent().hide();"></i></a>
						<a href="#" class="ssofShipment" style="display:none; margin-left:10px;"><i class="icon-edit dpicon" data-date="2012-06-01" data-date-format="yyyy-mm-dd"></i></i><span class="label label-info dptarget">Select Date</span><i class="icon-remove" onclick="$(this).parent().hide();"></i></a>
						<a href="#" class="ssofShipment" style="display:none; margin-left:10px;"><i class="icon-edit dpicon" data-date="2012-06-01" data-date-format="yyyy-mm-dd"></i></i><span class="label label-info dptarget">Select Date</span><i class="icon-remove" onclick="$(this).parent().hide();"></i></a>
						<a href="#" onclick="$('.ssofShipment:hidden:first').show();" style="margin-left:10px;"><i class="icon-plus"></i> Add Shipment</a>
					</td>
				</tr>
				<tr id="ssofSubmitRow" class="ssofDLRow" style="display:none">
					<th></th>
					<td>
						<input type="button" class="btn btn-primary" id="btnDownloadSSOF" value="Download Order Form" onclick="doDownloadSSOF()" style="margin-top:10px;">
					</td>
				</tr>				
			</tbody>
		</table>
	</div>
	<div class="span12" id="uploadSSOFDIV" style="display:none;">
		<div id="uploadSSOF_TAB1" class="span12">
			<div class="span12">Select your completed iVendix Order Form. If you do not have an iVendix order form, you can create one from the Orders > Download Order Form menu option. You will be notified if there are any errors in the products being uploaded.<br /><br /></div>
			<div class="span12">
				<b>Select Order Form</b>: <input type="file" class="FT CoolBut" id="orderForm" name="orderForm" onchange="killAlerts('#orderFormAlert')">
				<div id="orderFormAlert"></div>
				<br />
			</div>
			<div class="span12">
				<input type="button" class="btn btn-primary" id="submitButton" value="Upload Order Form" onclick="doUploadSSOF()">
				<input type="button" class="btn" id="CancelUploadButton" value="Cancel" onclick="hideallthings()">
			</div>
		</div>
		<div id="uploadSSOF_TAB2" class="span12" style="display:none">
			<div class="row">
				<div class="span3"><b>Catalog</b>: Fall 2012
				</div>
				<div class="span3">
					<label class="checkbox"><input type="checkbox" id="validationShowImages" onclick="javascript:$('.ValShipImg').toggle();">Show images</label>
				</div>
				<div class="span6" style="text-align:right">
					<i class="icon-print" style="cursor:pointer" onclick="window.print()"></i>&nbsp;&nbsp;
					<i class="icon-envelope" style="cursor:pointer"></i>&nbsp;&nbsp;&nbsp;
					<button class="btn" value="Cancel" onclick="hideallthings()">Cancel</button>&nbsp;
					<button class="btn" value="SaveAsIs">Save</button>&nbsp;
					<button class="btn btn-primary" value="Continue" onclick="firemeup();runme(1);flipshipments();showorderopt(7);">Continue</button></div>
			</div>
			<div class="span12">
					<ul class="nav nav-tabs">
					  <li class="active" id="validationSummary">
						<a href="#" onclick="showValidationSummary()">Summary</a>
					  </li>
					  <li id="validationShipment1">
						<a href="#" onclick="showValidationShipment1()"><i class="icon-edit dpicon" data-date="2012-07-01" data-date-format="yyyy-mm-dd"></i><span class="label label-important dptarget">JUL 1, 2012</span></a>
					  </li>
					  <li id="validationShipment2">
						<a href="#"><i class="icon-edit dpicon" data-date="2012-09-01" data-date-format="yyyy-mm-dd"></i><span class="label label-info dptarget">SEP 1, 2012</span></a>
					  </li>
					  </ul>
			</div>
			<div id="validationSummaryDIV" class="span12" style="display:none">
				<table class="table-condensed table-striped">
					<thead>
						<tr style="background-color:black; color:white;">
							<th>Shipment</th>
							<th>Qty Requested</th>
							<th>Qty Permitted</th>
						</tr>
					</thead>
					<tbody>
						<tr style="color:red;">
							<td>April 20, 2012</td>
							<td style="text-align:center">21</td>
							<td style="text-align:center">15</td>
						</tr>
						<tr style="color:black;">
							<td>May 1, 2012</td>
							<td style="text-align:center">32</td>
							<td style="text-align:center">32</td>
						</tr>
					</tbody>
					<tfoot>
						<tr style="background-color:#808080; color:white;">
							<th>Total</th>
							<th>53</th>
							<th>47</th>
						</tr>
					</tfoot>
				</table>
			</div>
			<div id="validationShipment1DIV" class="span12" style="display:none">
				<table id="validationResultsTable" class="table-condensed table-striped tablesorter">
					<thead>
						<tr style="background-color:black; color:white;">
							<th style="display:none">1</th>
							<th class="ValShipImg" style="display:none;"></th>
							<th>My Sort</th>
							<th>UPC</th>
							<th onclick="validationItemSort();" style="cursor:pointer;">Item</th>
							<th>Description</th>
							<th>Price</th>
							<th>Qty Requested</th>
							<th>Qty Permitted</th>
							<th>Reason</th>
						</tr>
					</thead>
					<tbody>
						<tr style="color:red;">
							<td style="display:none">2</td>
							<td class="ValShipImg" align="center" style="display:none; width:35px; height:35px;"><img style="height:35px" src="pics/1122604__100.JPG"></td>
							<td style="text-align:center">1</td>
							<td>700599338569</td>
							<td>1126</td>
							<td>Teton Jacket - [Smoke R XS]</td>
							<td style="text-align:right">$59.95</td>
							<td style="text-align:center">6</td>
							<td style="text-align:center">4</td>
							<td>Product available but not in the quantity requested</td>
						</tr>
						<tr style="color:black;">
							<td style="display:none">3</td>
							<td class="ValShipImg" align="center" style="display:none; width:35px; height:35px;"><img style="height:35px" src="pics/1122610__100.JPG"></td>
							<td style="text-align:center">2</td>
							<td>700599032511</td>
							<td>1126</td>
							<td>Teton Jacket - [White R XS]</td>
							<td style="text-align:right">$59.95</td>
							<td style="text-align:center">2</td>
							<td style="text-align:center">2</td>
							<td>Products and quantities have been accepted</td>
						</tr>
						<tr style="color:black;">
							<td style="display:none">4</td>
							<td class="ValShipImg" align="center" style="display:none; width:35px; height:35px;"><img style="height:35px" src="pics/1122633__100.JPG"></td>
							<td style="text-align:center">3</td>
							<td>700599523088</td>
							<td>1126</td>
							<td>Teton Jacket - [Mineral Micro Plaid T L]</td>
							<td style="text-align:right">$59.95</td>
							<td style="text-align:center">3</td>
							<td style="text-align:center">3</td>
							<td>Products and quantities have been accepted</td>
						</tr>
						<tr class="ValShipSubtotal" style="background-color:#808080; color:white;">
							<th style="display:none">5</th>
							<th class="ValShipImg" style="display:none;"></th>
							<th colspan="5">Totals for Item 1126</th>
							<th style="text-align:center">11</th>
							<th style="text-align:center">9</th>
							<th></th>
						</tr>
						<tr>
							<td style="display:none">6</td>
							<td class="ValShipImg" align="center" style="display:none; width:35px; height:35px;"><img style="height:35px" src="pics/1528609__100.JPG"></td>
							<td style="text-align:center">4</td>
							<td>700599735290</td>
							<td>15286</td>
							<td>Commando SS Pant - [Black R S]</td>
							<td style="text-align:right">$69.95</td>
							<td style="text-align:center">6</td>
							<td style="text-align:center">6</td>
							<td>Products and quantities have been accepted</td>
						</tr>
						<tr class="ValShipSubtotal" style="background-color:#808080; color:white;">
							<th style="display:none">7</th>
							<th class="ValShipImg" style="display:none;"></th>
							<th colspan="5">Totals for Item 15286</th>
							<th style="text-align:center">6</th>
							<th style="text-align:center">6</th>
							<th></th>
						</tr>
						<tr style="color:red;">
							<td style="display:none">8</td>
							<td class="ValShipImg" style="display:none;"></td>
							<td style="text-align:center">5</td>
							<td>700599523788</td>
							<td></td>
							<td>Product not found</td>
							<td></td>
							<td style="text-align:center">4</td>
							<td style="text-align:center">0</td>
							<td>Product not found</td>
						</tr>
						<tr class="ValShipSubtotal" style="background-color:#808080; color:white;">
							<th style="display:none">9</th>
							<th class="ValShipImg" style="display:none;"></th>
							<th colspan="5">Totals for Unknown Products</th>
							<th style="text-align:center">4</th>
							<th style="text-align:center">0</th>
							<th></th>
						</tr>
					</tbody>
					<tfoot>
						<tr style="background-color:black; color:white;">
							<th style="display:none">10</th>
							<th class="ValShipImg" style="display:none;"></th>
							<th colspan="5">Shipment Total</th>
							<th style="text-align:center">21</th>
							<th style="text-align:center">15</th>
							<th>2 products accepted</th>
						</tr>
					</tfoot>
				</table>
			</div>
		</div>
	</div>
</div>

<div class="span12" id="orderFromTemplate" style="display:none;">
	<div class="span12"><h3>Order from a Template</h3><br /></div>
		<div id="orderFromTemplate_TAB1" class="span12">
			<div class="span12"><label class="checkbox"><input type="checkbox" onclick="$('.otherTemplate').toggle()">Show only my templates</label></div>
			<div class="span12" style="margin-top:10px;">
				<table id="templateTable" class="table-condensed table-striped">
					<thead>
						<tr style="background-color:black; color:white;">
							<th>Template Name</th>
							<th>Catalog</th>
							<th>Created By</th>
							<th>Preview</th>
							<th>Ship</th>
							<th>Units</th>
							<th>Order Total</th>
						</tr>
					</thead>
					<tbody>
						<tr class="otherTemplate">
							<td><label class="radio"><input type="radio" name="templateSel">13k non result adult order</label></td>
							<td>Fall 2012</td>
							<td>CHANDRA FREEBAIRN</td>
							<td style="text-align:center"><i class="icon-zoom-in"></i></td>
							<td>07/06/2012</td>
							<td style="text-align:right">121</td>
							<td style="text-align:right">$13,337.50</td>
						</tr>
						<tr class="otherTemplate">
							<td><label class="radio"><input type="radio" name="templateSel">15k adult resort</label></td>
							<td>Fall 2012</td>
							<td>CHANDRA FREEBAIRN</td>
							<td style="text-align:center"><i class="icon-zoom-in"></i></td>
							<td>10/01/2012</td>
							<td style="text-align:right">128</td>
							<td style="text-align:right">$15,551.75</td>
						</tr>
						<tr class="otherTemplate">
							<td><label class="radio"><input type="radio" name="templateSel">25k concept shop</label></td>
							<td>Spring 2012</td>
							<td>CHANDRA FREEBAIRN</td>
							<td style="text-align:center"><i class="icon-zoom-in"></i></td>
							<td>10/01/2012</td>
							<td style="text-align:right">273</td>
							<td style="text-align:right">$25,603.25</td>
						</tr>
						<tr>
							<td><label class="radio"><input type="radio" name="templateSel">Fall Starter</label></td>
							<td>Fall 2012</td>
							<td>John Gredig</td>
							<td style="text-align:center"><i class="icon-zoom-in"></i></td>
							<td>09/01/2012</td>
							<td style="text-align:right">100</td>
							<td style="text-align:right">$9,768.50</td>
						</tr>
						<tr>
							<td><label class="radio"><input type="radio" name="templateSel">Spring Starter</label></td>
							<td>Spring 2012</td>
							<td>John Gredig</td>
							<td style="text-align:center"><i class="icon-zoom-in"></i></td>
							<td>06/01/2012</td>
							<td style="text-align:right">100</td>
							<td style="text-align:right">$11,768.50</td>
						</tr>
						<tr>
							<td><label class="radio"><input type="radio" name="templateSel">Fall Essentials</label></td>
							<td>Fall 2012</td>
							<td>John Gredig</td>
							<td style="text-align:center"><i class="icon-zoom-in"></i></td>
							<td>09/01/2012</td>
							<td style="text-align:right">25</td>
							<td style="text-align:right">$2,550.00</td>
						</tr>
						<tr>
							<td><label class="radio"><input type="radio" name="templateSel">Fall Sample</label></td>
							<td>Fall 2012</td>
							<td>John Gredig</td>
							<td style="text-align:center"><i class="icon-zoom-in"></i></td>
							<td>09/01/2012</td>
							<td style="text-align:right">10</td>
							<td style="text-align:right">$782.75</td>
						</tr>
					</tbody>
				</table>
			</div>
			<div class="span12" style="margin-top:10px;"><label class="checkbox"><input type="checkbox">Include quantities from template</label></div>
			<div class="span6" id="templateAlert"></div>
			<div class="span6" id="templateAlert2"></div>
			<div class="span12" style="margin-top:10px;">
				<input type="button" class="btn btn-primary" id="btnUseSelectedTemplate" value="Use Selected Template" onclick="doUseSelectedTemplate()">
				<input type="button" class="btn" id="btnCancelTemplate" value="Cancel" onclick="hideallthings()">
			</div>
		</div>
	</div>


<script type="text/template" id="template-Menu">
<%
	print('<ul class="nav">');
	var iMenuItem = 0;
	while(iMenuItem < menuItems.length) {
		var item = menuItems.at(iMenuItem);
		if((item.get("MenuType_cd") == "mm") && (iMenuItem < menuItems.length-1) && (menuItems.at(iMenuItem+1).get("MenuType_cd") == "sm1")) {
			print('<li class="dropdown">');
			print('<a href="#" class="dropdown-toggle" data-toggle="dropdown">' + '<i class="' + item.get("MenuIcon") + '"></i>' + item.get("MenuText") + ' <b class="caret"></b></a>');
			print('<ul class="dropdown-menu">');
			for(iMenuItem++; (iMenuItem < menuItems.length) && (menuItems.at(iMenuItem).get("MenuType_cd") == "sm1"); iMenuItem++) {
				item = menuItems.at(iMenuItem);
				if(item.get("Separator")) {
					print('<li class="divider"></li>');
				} else {
					print('<li onclick="' + item.get("MenuAction") + '"><a href="#"><i class="' + item.get("MenuIcon") + '"></i> ' + item.get("MenuText") + '</a></li>');
				}
			}
			print('</ul>');
			print('</li>');
		} else {
			print('<li onclick="' + item.get("MenuAction") + '"><a href="#"><i class="' + item.get("MenuIcon") + '"></i> ' + item.get("MenuText") + '</a></li>');
			iMenuItem++;
		}
	}
	print('</ul>');
%>
</script>
<script type="text/template" id="template-GridView">
	<table class="table table-striped table-condensed" sizescale="<%= product.get("Sizes").map(function(e) { return e.get("Size")}).join("-") %>">
	  <thead>
		<tr class="rowWithSpan">
			<%
				if(options.showShipmentHeader) {
					print('<th colspan="<%= product.get("Sizes").length + 3 %>" style="background-color: #DCDCDC;">');
					if(options.showStoreSelection) {
						print('<input type="search" class="input-xxlarge" style="margin: 0 auto;" placeholder="Store" data-provide="typeahead" data-source="[&quot;BACKDOOR SPORTS 841 YAMPA AVENUE STEAMBOAT SPRINGS CO 80477&quot;,&quot;BADGER SPORTING GOODS 2814 Bryant Rd Madison WI 53713-3002&quot;,&quot;BADGER SPORTING GOODS 2814 BRYANT ROAD MADISON WI 53713&quot;,&quot;Logo Sportswear 708 Carpenter Ave Iron Mountain MI 49801-3306&quot;,&quot;SD&amp;G 807 S Maple St Effingham IL 62401-2641&quot;,&quot;BABBITTS SPORTS CENTER SPORTS INC MEMBER# 696 FLAGSTAFF AZ 86001&quot;,&quot;DAKOTA OUTERWEAR 203 72ND AVENUE MINOT ND 58701&quot;,&quot;DAKOTA SPORTS 700 JACKSON BLVD RAPID CITY SD 57702&quot;,&quot;DAKOTA SPORTS, INC. 2802 WEST 41ST STREET SIOUX FALLS SD 57105&quot;,&quot;Dales Sporting Goods 106 S Main St China Grove NC 28023-2448&quot;,&quot;HAUFF SPORTING GOODS 714 PIERCE STREET SIOUX CITY IA 51101&quot;]">');
					}
					print('<input type="text" class="input-medium" value="' + dateFormat(header.get("RequestedShipDate"),"mmm d, yyyy") + '"><input type="text" class="input-medium" placeholder="Shipment Name" value="' + header.get("OrderName") + '"><input type="text" class="input-medium" placeholder="Retailers PO" value="' + header.get("RetailersPO") + '"></th>');
				}
			%>
		</tr>
		<tr class="gridHeader">
		  <th>Color/Size</th>
			<%
				product.get("Sizes").each(function(sz) {
					print("<th>" + sz.get("Size") + "</th>");
				});
			%>
		  <th>Total</th>
		<%
			if(options.showSizeRuns) {
				print('<th>Size Run</th>');
			}
		%>
		</tr>
	  </thead>
	  <tbody>
		<%
			var Size_IDs = product.get("Sizes").map(function(sz) { return sz.get("Size_ID"); });
			var LastColor_ID = 0;
			var iSize = 0;
			product.get("ProductsDetails").each(function(pd, iPD) {
				var isNewColor = pd.get("Color").get("Color_ID") != LastColor_ID;
				var isLastCell = (iPD == product.get("ProductsDetails").length - 1);
				if(isNewColor && LastColor_ID != 0) {
					while(iSize < Size_IDs.length) {
						print('<td><input type="text" class="span1 qtyCell" style="background-color:black;" disabled="disabled"></td>');
						iSize++;
					}
					print('<td class="rowTotal" color="' + LastColor_ID + '">0</td>');
					if(options.showSizeRuns) {
						print('<td><a class="btn copySizeRun"><i class="icon-bookmark"></i></a>&nbsp;<a class="btn pasteSizeRun disabled"><i class="icon-play"></i></a></td>');
					}
					print("</tr>");
				}
				if(isNewColor) {
					print("<tr>");
					print("<td>" + pd.get("Color").get("Color") + "</td>");
					LastColor_ID = pd.get("Color").get("Color_ID");
					iSize = 0;
				}
				while(Size_IDs[iSize] != pd.get("Size").get("Size_ID")) {
					print('<td><input type="text" class="span1 qtyCell" style="background-color:black;" disabled="disabled"></td>');
					iSize++;
				}
				print('<td><input type="text" class="span1 qtyCell" placeholder="' + formatMoney(product.get("Price")) + '" shipment="' + shipment + '" pdid="' + pd.get("ProductsDetail_ID") + '"></td>');
	 			iSize++;
				if(isLastCell) {
					while(iSize < Size_IDs.length) {
						print('<td><input type="text" class="span1 qtyCell" style="background-color:black;" disabled="disabled"></td>');
						iSize++;
					}
					print('<td class="rowTotal" color="' + LastColor_ID + '">0</td>');
					if(options.showSizeRuns) {
						print('<td><a class="btn copySizeRun"><i class="icon-bookmark"></i></a>&nbsp;<a class="btn pasteSizeRun disabled"><i class="icon-play"></i></a></td>');
					}
					print("</tr>");
				}
			});
		%>
		<tr>
		  <th>Total</th>
			<%
				product.get("Sizes").each(function(sz) {
					print('<th class="colTotal" size="' + sz.get("Size_ID") +'">0</th>');
				});
			%>
		  <th class="gridTotal">0</th>
		<%
			if(options.showSizeRuns) {
				print('<th>&nbsp;</th>');
			}
		%>
		</tr>
		<%
			if(options.showShipmentTotal) {
				print('<tr><th colspan="' + (product.get("Sizes").length + 1) + '">' + ((shipment > 0) ? "Shipment Total" : "Order Total") + ' (This Product)</th><th class="gridTotalPrice">$0</th>');
				if(options.showSizeRuns) {
					print('<th>&nbsp;</th>');
				}
				print ('</tr>');
			}

			if(options.showButtons) {
				print('<tr class="rowWithSpan">');
				print('	<td colspan="7" style="text-align: right;">');
				print('		<input class="btn" type="button" value="Close" onclick="hideordergrid()">');
				print('		<input class="btn btn-primary" type="button" value="Save" onclick="switchme6()">');
				print('	</td>');
				print('</tr>');
			}
		%>
	  </tbody>
	</table>
</script>
<script type="text/template" id="template-ListView">
	<%
		var orderCount = orderGroup.get("OrderHeaders").length;
	%>
	<table class="table table-striped table-condensed">
	  <thead>
		<tr>
		  <th>Item Number</th>
		  <th>Product Name</th>
		  <th>Color</th>
		  <th>Size</th>
		  <th>SKU</th>
		  <th>Price</th>
		  <%
			orderGroup.get("OrderHeaders").each(function(ord, i) {
				print('<th><a href="#" shipment="' + (i + 1) + '">');
				print('<i class="icon-edit dpicon" data-date="" data-date-format="yyyy-mm-dd"></i>');
				print('<span class="label label-info dptarget"></span>');
				print('</a></th>');
			});
		  %>
		  <th>Line Total</th>
		</tr>
	  </thead>
	  <tbody>
		<%
			for(var iProd = 0; iProd < products.length; iProd++) {
				var prod = products.at(iProd);
				var details = _.toArray(prod.get("Details"));
				var iDetail = 0;
				prod.get("ProductsDetails").each(function(pd) {
					print('<tr>');
					print('<td>' + prod.get("ItemNumber") + '</td>');
					print('<td>' + prod.get("ProductName") + '</td>');
					print('<td>' + pd.get("Color").get("Color") + '</td>');
					print('<td>' + pd.get("Size").get("Size") + '</td>');
					print('<td>' + prod.get("ItemNumber") + "-" + pd.get("Color").get("ColorCode") + "-" + pd.get("Size").get("Size") + '</td>');
					print('<td class="linePrice">' + formatMoney(prod.get("Price")) + '</td>');
					for(var i = 0; i < orderCount; i++) {
						print('<td><input type="text" class="span1 qtyCell" value="" shipment="' + (i+1) + '" pdid="' + pd.get("ProductsDetail_ID") + '"></td>');
					}
					print('<td class="lineTotal" pdid="' + pd.get("ProductsDetail_ID") + '" style="text-align:right;">$0.00</td>');
					print('</tr>');
					iDetail++;
				});
			}
		%>
		<tr>
		  <th colspan="<%=orderCount+4%>">Totals</th>
		  <%
			for(var i = 0; i < orderCount; i++) {
				print('<td class="colQtyTotal" shipment="' + (i+1) + '">0</td>');
			}
		  %>
		  <td>&nbsp;</td>
		</tr>
		<tr>
		  <th colspan="<%=orderCount+4%>">Amount Totals</th>
		  <%
			for(var i = 0; i < orderCount; i++) {
				print('<td class="colTotal" shipment="' + (i+1) + '">$0.00</td>');
			}
		  %>
		  <td class="orderTotal" style="text-align:right;">$0.00</td>
		</tr>
	  </tbody>
	</table>
</script>
<script type="text/template" id="template-ImageView">
	<div class="span12">
		<ul class="thumbnails">
			<%
				products.each(function(prod) {
					if(details) {
						var qty = 0, total = 0;
						details.each(function(od) {
							if(od.get("ProductsDetail").get("Product") == prod) {
								qty += parseInt(od.get("Qty"));
								total += parseInt(od.get("Qty")) * od.get("ProductsDetail").get("Product").get("Price");
							}
						});
					}
					print('<li class="span2" cid="' + prod.get("Product_ID") + '">');
					print('	<a href="#" class="thumbnail"  onclick="showorderopt(4)">');
					print('		<img src="pics/' + prod.get("Image") + '" alt="">');
					print('	</a>');
					print('	<h5>' + prod.get("ItemNumber") + '</h5>');
					print('	<p>' + prod.get("ProductName") + '</p>');
					print('	<p>' + formatMoney(prod.get("Price")) + '</p>');
					if(orderGroup.get("OrderGroupProducts").get(prod)) {
						print('	<span class="btn btn-danger"  title="Remove from all shipments">');
						print('		<i class="icon-remove icon-white"></i>');
						print('	</span>');
					} else {
						print('	<span class="btn"  title="Add to order">');
						print('		<i class="icon-plus"></i>');
						print('	</span>');
					}
					if(details) {
						print('	<span class="btn' + ((qty == 0) ? " disabled" : "") + '" title="Remove quantities, but leave on order">');
						print('		<i class="icon-minus"></i>');
						print('	</span>');
					}
					print('	<span class="btn editGrid" title="Edit quantities entered for this product">');
					print('		<i class="icon-edit"></i>');
					print('	</span>');
					if(details) {
						print('	<h5>Qty: ' + qty + ' Total: ' + formatMoney(total) + '</h5>');
					}
					print('</li>');
				});
			%>
		</ul>
	</div>
</script>
<script type="text/template" id="template-ShipmentTabs">
	<ul class="nav nav-tabs" id="shipmentTabs">
		<li class="active" id="searchresultstab">
			<a href="#" onclick="showorderopt(2)">Search Results</a>
		</li>
		<li id="orderedtab" style="display:none;">
			<a href="#" onclick="showorderedpallet()">My Order</a>
		</li>
		<%
			var i = 0;
			orderGroup.get("OrderHeaders").each(function(ord) {
				i += 1;
				print('<li class="tabShipment" shipment="' + i + '">');
				var dtShipDate = new Date(ord.get("RequestedShipDate"));				
				print('<a href="#"><i class="icon-edit dpicon" data-date="' + dateFormat(dtShipDate,"yyyy-mm-dd") + '" data-date-format="yyyy-mm-dd"></i><span class="label label-info dptarget">' + dateFormat(dtShipDate,"mmm d, yyyy") + '</span></a>');
				print('</li>');
			});
		%>
		<li >
			<a href="#" class="addShipment"><i class="icon-plus"></i> Add Shipment</a>
		</li>
	</ul>
	<br>
</script>
<script type="text/template" id="template-Carousel">
	<ul class="thumbnails">
		<li class="span1"><i class="icon-backward"></i></li>
		<%
			products.each(function(prod) {
				print('<li class="span1" style="background-color: #DCDCDC;">');
				print('<a href="#" class="thumbnail" onclick="buildCarouselView(' + prod.get("Product_ID") + ')">' + prod.get("ItemNumber") + ' ' + prod.get("ProductName") + ' 1');
				print('<img src="pics/' + prod.get("Image") + '" style="max-height: 100px;" alt="">');
				print('</a>');
				print('</li>');
			});
		%>
		<li class="span1"><i class="icon-forward"></i></li>
	</ul>
</script>
<script type="text/template" id="template-RVProductView">
	<li class="span2" data-cid="product.Product_ID" cid="">
		<a href="#" class="thumbnail" onclick="showorderopt(4)"><img data-src="product.Image | imageURL" src="" alt=""></a>
		<h5 data-text="product.ItemNumber"></h5>
		<p data-text="product.ProductName"></p>
		<p data-text="product.Price | money"></p>
		<span class="btn" title="Add to order"><i class="icon-plus"></i></span>
		<span class="btn btn-danger" title="Remove from all shipments"><i class="icon-remove icon-white"></i></span>
		<span class="btn" title="Remove quantities, but leave on order"><i class="icon-minus"></i></span>
		<span class="btn editGrid" title="Edit quantities entered for this product"><i class="icon-edit"></i></span>
		<h5>Qty: 9 Total: $2,250.00</h5>
	</li>
</script>
<script type="text/template" id="template-RVProductsView">
	<li data-each-product="products.models" class="span2" data-cid="product.Product_ID" cid="">
		<a href="#" class="thumbnail" onclick="showorderopt(4)"><img data-src="product.Image | imageURL" src="" alt=""></a>
		<h5 data-text="product.ItemNumber"></h5>
		<p data-text="product.ProductName"></p>
		<p data-text="product.Price | money"></p>
		<span data-hide="product.onOrder" action="Add" class="btn" title="Add to order"><i class="icon-plus"></i></span>
		<span data-show="product.onOrder" action="RemoveProduct" class="btn btn-danger" title="Remove from all shipments"><i class="icon-remove icon-white"></i></span>
		<span data-show="product.onOrder" action="RemoveQuantities" class="btn" title="Remove quantities, but leave on order"><i class="icon-minus"></i></span>
		<span class="btn editGrid" action="Edit" title="Edit quantities entered for this product"><i class="icon-edit"></i></span>
		<h5>Qty: 9 Total: $2,250.00</h5>
	</li>
</script>
</body>
</html>
	